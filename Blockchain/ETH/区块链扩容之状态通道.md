### 状态通道图文解释

BTC ETH和所有（好的）区块链计算机都有一个重要的特点：它们很慢。状态通道是改变这一点并将区块链带入大规模应用的第一次尝试。

区块链的原始扩展技术指南。

![[Pasted image 20220917143358.png]]

2008年，中本聪创造了区块链技术，永远改变了世界。

其目的是：创建一个共享的、去中心化的受信的计算平台。一个公共设施，所有人都可以使用......在任何时候......以任何理由。

区块链计算机的基础是去中心化：更多的中心化需要更多的信任假设(比如以国家等之类的政府背书，大公司等)。

为了维持去中心化，我们必须确保广泛的机器能够参与。

因此，关心去中心化的区块链必须保持其核心协议要求相对较轻；如果它需要一个数据中心，网络将很快集中化。

简单地说，（好的）区块链计算机是无需信任的......但它们是缓慢的。

于是，显而易见的问题随之而来：我们如何在保持低节点要求(不需要太高性能的机器)（从而保持去中心化）的同时，扩展区块链计算机？

今天，我们有许多解决方案。但让我们从"状态通道"开始。

状态通道允许参与者在链下安全地进行交易，将与主链（缓慢和昂贵）的互动保持在最低限度。

该系统允许对等人进行任意数量的（链外）txns(交易)，同时只提交两个链上txns(交易)。相当于通道在打开状态，你可以进行任意数量的交易，通道关闭提交时，只需要把这些交易的状态，通过两个交易提交到链上。

用户通过将资金存入主区块链上的智能合约来打开一个状态通道，将资本托管起来。

这笔资金不能被动用，直到状态通道关闭。

![[Pasted image 20220917144022.png]]

在状态通道内，参与者可以相互发送资金，几乎没有成本。

为了进行支付，用户签署一个票据（链外信息）并将其交付给收件人。这可以根据需要继续进行多次支付。这些票据就是一次次的链下交易。

![[Pasted image 20220917144128.png]]

当参与者完成交易后，他们可以签署并发布价值最高的票据回到主区块链上。

智能合约将验证签名并结算状态通道（向接收者付款，并将其余部分发送给原所有者）



![[Pasted image 20220917144503.png]]

如果一方不愿意关闭通道（恶意，技术故障等），其他参与者可以启动提款(withdraw)期。

如果不愿意的一方在提款时间内没有提供票据，那么提款的参与者可以拿回他/她所有的钱。

例子。Alice以1.3美元/升的价格提供燃料，Bob需要燃料。

Bob向智能合约发送了20美元，并开始泵送燃料。每抽完一升，Bob就签一张新的票，递增1.3美元。当他达到10升的时候，他就完成了。

现在，Alice拿着价值最高的(累加的)票据（13美元），签名并将其发布到智能合约，以关闭状态通道。

智能合约验证了票据，然后结算通道。13美元发给Alice，剩下的7美元发给Bob。

虽然这种技术很强大，但状态通道能做的事情是有限的。

- 不能在链外向尚未参与的人发送资金
- 不能代表没有明确所有者的对象（例如 Uniswap)
- 需要大量的价值被锁定，才可以进行多次交易

研究人员一直在努力解决这些问题，然而我们已经找到了更好的解决方案......首先是plasma链，然后是Rollups。

今天，状态通道只用于利基应用程序(niche apps)和不能支持现代扩展解决方案的区块链。

### 状态通道文字解释

[State Channels | ethereum.org](https://ethereum.org/en/developers/docs/scaling/state-channels/)