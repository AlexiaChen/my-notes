这里会相当于一个字段一个字段讲解ETH的交易

![[Pasted image 20220917161554.png]]

ETH在世界上大概有1000台计算机在运行，保证ETH主网的去中心化运行。

用户通过一个钱包与以太坊互动（如 MetaMask)，它创建并向网络发送txns。一旦被接受，txns就会被写入一个区块中。

先决条件 - Hash，(应用Hash函数)

Hash函数：用于将任何数量的数据转化为一个紧凑、统一的数值的一段代码。输入可以是任意长度的，但输出总是相同的长度。

(好的）Hash函数是不可逆的。

一个 ETH交易是由3个部分组成的。

- 元数据，包括to/from、$ETH金额(amount)、gas details和签名数据
- 缓存，交易预期使用的accounts和keys的列表 
- 数据，交易的有效载荷（智能合约的EVM字节码或API调用）。

![[Pasted image 20220917161948.png]]

元数据--关于交易的信息

所附图片显示了所有的元数据字段。我们将在下文中讨论那些不明显的字段。

![[Pasted image 20220917162030.png]]

![[Pasted image 20220917162039.png]]

`chainId` - 由EIP-155引入，以防止$ETC重放攻击

`type`--有两种类型：新合约（0x0）和所有其他类型（0x2）。EIP-2718引入了一个包装器（0x2），允许更多类型而不影响核心 的ETH spec

`nonce`-- 从一个特定的地址发送的交易数量。一旦被刻印在区块上，钱包的nonce就会增加。防范重放攻击

`to`--- 交易被发送到的地址（钱包或智能合约）。

`value` --- 转移的 $ETH的数量。注意 - 这只是针对 $ETH（没有其他代币）。

`gas` --- 被交易使用的gas的units，就是以gas的最小单位来计数

`maxFeePerGas` --- 创建该交易的用户愿意支付的最高金额（WEI/Gas）。包括基本费(base fee)和优先费(priority fee)

`maxPriorityFeePerGas` --- 在创建交易的用户愿意支付的基本费用(base fee)之上的最大金额（WEI/Gas）。这笔费用将直接支付给矿工/验证者，作为激励纳入的小费。

`(r,s,v)` -- 构成创建交易的用户的签名的三个值。它们可以用来验证该用户在EVM中执行交易之前是否授权了该交易。欲了解更多信息，请参阅。椭圆曲线数字签名算法(ECDSA)

`Cache` --- 包含accessList，这是一个交易预期使用的account和key的列表。交易仍然能够使用这个列表中的资源，但成本较高。

![[Pasted image 20220917162842.png]]

![[Pasted image 20220917162853.png]]

accessList是由EIP-2929添加的，允许客户获取/缓存数据，以便在交易中使用。

今天，在accessList中使用地址和key的折扣是~10%。然而，这将在未来增加，因为 
ETH未来会移动到支持轻型客户端。

`Data` -- 交易传递的数据有效载荷(payload)。这可以通过3种方式使用。

- $ETH转账 - 空

- 智能合约的API调用 - 函数的名称和参数

- 新智能合约--智能合约的EVM字节码

![[Pasted image 20220917163102.png]]

![[Pasted image 20220917163114.png]]

Data的input字段是以二进制记录的，但可以翻译成人类可读的形式。

![[Pasted image 20220917163204.png]]

input字段存在于链上，但不是EVM状态的一部分。它只是提供数据给合约在交易中使用，它不被 
ETH track，也不在共识中使用。

EVM只能使用在该交易中提供的数据；它不能回头看。

这个属性对于想要将历史数据写入到 ETH区块链上的应用来说，这个属性非常有用。
 （例如，供以后手动检索），但不关心是否有直接的EVM访问。

rollups是第一类真正利用这个想法的应用程序。

我们将在下一次讨论rollups的问题。现在，rollups依赖于这样一个事实，即把数据写进input字段比直接写进 ETH区块链状态的成本更低。

这使得rollup可以更有效地执行，同时仍然发布链上所有txns的记录。

![[Pasted image 20220917163604.png]]