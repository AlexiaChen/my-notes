同步委员会(Sync Committees)和轻客户端(Light Client)。

就在大约一年前，Altair的升级给了validators一个新的职责：同步委员会(sync committee)。了解这个核心共识功能是如何实现最终游戏的。

一个真正去中心化的世界计算机

![[Pasted image 20221014190809.png]]

先回顾下以太坊的共识，[[ETH之共识系统]]  [[ETH之时间-Slots和Epochs]] 

以太坊也会把validator set搭乱成32个委员会 [[ETH之随机性和RANDAO#^a35145]]

[[ETH之区块提议]]

[[ETH之证明Attestation]]

回顾完以后。我们开始正文了。

每个epoch，validators集合被分成32个委员会，每个委员会负责证明(attest)一个区块。

因此，每个epoch的每个validator都提交一个签名，代表他们个人保证该区块是有效的，是区块链的一部分。

PoS是以这些加密签名为前提的；经济安全来自于每个证明验证者（attesting vaidator）都可以被砍掉(slashed)。

没有签名（以及验证它们的能力），整个系统就变成了 "相信区块中的数据"。

好了，我们已经了解了这个想法，现在我们来看看现实。

现在有~442k个vaidators，每个validator每6.4分钟提交一次证明(attestation)（数字签名）。

~442k个签名是一个很大的签名。

![[Pasted image 20221014191536.png]]

所以BLS签名就派上用场了  [[BLS数字签名]]

简单来说， BLS签名允许你用与单个签名相同的操作来验证大量的签名。

但为了创建验证信息所需的（公钥），你需要访问底层的各个公钥。

当区块提议者(block proposer)在准备区块时，他们会将聚合签名添加到区块头，但他们不会添加聚合密钥（这里是批量一次性验签的公钥，公钥也是聚合的）

整个要点是要独立地建立聚合密钥（公钥）。否则，验证的意义何在？

 对于一个ETH的节点来说，这是没有问题的。运行节点（也就是运行validator）的部分职责是在可访问的内存中持有validators集合，并快速计算聚合签名。
![[Pasted image 20221014191911.png]]

其中一个核心设计理念是，一个完整的以太坊全节点具有（相对）低的要求。这是世界计算机的去中心化和可信的中立性的基石。

而且，一般来说，以太坊已经把它敲定了!

今天，一台相对适中的电流（专用）计算机（不太耗电，功率不高的计算机）就可以完成这项工作。随着时间的推移，一个最低规格的以太坊节点成本会越来越低。

然而，有某些类型的计算机将永远不适合......非常有用的计算机类型。

![[Pasted image 20221014192149.png]]

![[Pasted image 20221014192201.png]]
一台规格低得离谱的电脑，也许是在发展中的经济体，怎么办？

如果是智能手机，它的处理能力绰绰有余，但连接不可靠呢？

在一个应用程序中呢，比如一个浏览器内的钱包（想象一下，如果MM不需要Infura）？

以太坊是世界计算机；所有（嗯，大多数）区块链都是去中心化的计算机......

在另一个区块链上的智能合约内运行一个节点呢？

虽然在上面的例子中，运行一个全节点可能永远不现实，但运行一个轻型客户端很可能是。

因此，在2021年10月，信标链收到了它的第一次升级，准备支持轻型客户端: Altair。

[The Ethereum Altair Upgrade Is Next Week. Here's What's in It - Decrypt](https://decrypt.co/84176/ethereum-altair-upgrade-next-week-heres-whats-in-it)

在其他方面，Altair的升级将同步委员会添加到了以太坊PoS规范。

同步委员会是一个由512个validators组成的小组，每256个epochs（约27小时）选择一次，他们不断地签署信标链中每个slot的区块头。（一个slot一个block）

每次产生一个区块，同步委员会的每个成员都会验证，如果有效，就会签名。这些签名会被广播到网络上。

然后，下一个slot开始，一个新的proposer被选中。这个新的proposer会聆听这些签名。

区块生产者收集所有符合他们对其链的看法的签名，并将它们聚合成一个最终的同步委员会签名。

然后区块生产者将签名和同步委员会的公钥（可快速验证）直接加入区块头。

同步委员会只包含512个validators；在数据存储和聚合密钥生成方面都是很小的数量。

这允许一个轻型客户端建立（从头开始）它所需要的聚合公钥，以无信任地验证签名，从而验证整个区块链。

![[Pasted image 20221014192822.png]]

今天，我们还没有功能完备的轻型客户端。Altair在协议层面升级了以太坊并创造了支持轻型客户端所需的必要的特性，但我们仍然需要填补其余的部分。

最重要的是：Merkle证明生成。