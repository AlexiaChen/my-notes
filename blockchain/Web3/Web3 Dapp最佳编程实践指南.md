
[Web3 DApp æœ€ä½³ç¼–ç¨‹å®è·µæŒ‡å— â€” éƒ­å®‡ (mirror.xyz)](https://guoyu.mirror.xyz/RD-xkpoxasAU7x5MIJmiCX4gll3Cs0pAd5iM258S1Ek)

è½¬è½½ä»¥ä¸Šã€‚

è‡ªå®£å¸ƒè¿›å…¥åˆ›ä¸šé—´éš”å¹´ä»¥æ¥ï¼Œ[CodeforDAO](https://mobile.twitter.com/codefordao)([GitHub](https://github.com/CodeforDAO/contracts)) ä¸Â [Checks Finance](https://checks.finance/)([@checksfinance](https://twitter.com/checksfinance))ä¸¤ä¸ªé¡¹ç›®è¿›å…¥äº†å¯†é›†è€Œç´§å¼ çš„è¿­ä»£å‘¨æœŸï¼Œåœ¨åˆçº¦ç¼–å†™ï¼Œå•å…ƒæµ‹è¯•ï¼Œå·¥ä½œæµè‡ªåŠ¨åŒ–ï¼Œå‰ç«¯ä¸å®¢æˆ·ç«¯æ–¹é¢éƒ½é‡åˆ°äº†è¾ƒå¤šé—®é¢˜ï¼Œå¯¹æ­¤ï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸€äº›ç»éªŒã€‚å½“å‰è¿™ä¸¤ä¸ªé¡¹ç›®è¿˜æœ‰å¤§é‡ç»†èŠ‚ç­‰å¾…ä¼˜åŒ–ï¼Œå°šæœªæ­£å¼ landingï¼Œæˆ‘è®¤ä¸ºå°†å¼€å‘è¿‡ç¨‹ä¸­çš„ç»éªŒå’Œæ€»ç»“ä¸å¤§å®¶è¿›è¡Œåˆ†äº«ï¼Œèƒ½å¸®åŠ©æ›´å¤šå·¥ç¨‹å¸ˆè½¬å‘ Web3ï¼Œä¹Ÿæœ‰åŠ©äºé¡¹ç›®çš„é•¿è¿œå‘å±•ã€‚

è¿™ç¯‡æ–‡ç« å°†ä¼šæ¶‰åŠåˆ°å¼€å‘ä¸€ä¸ª DApp æ‰€æ¶µç›–çš„å‡ ä¹æ‰€æœ‰æ–¹é¢å†…å®¹ï¼Œå› æ­¤ï¼Œå®ƒä¼šéå¸¸å†—é•¿ç¹çï¼Œå¦‚æœä½ å¯¹æŸä¸€æ–¹é¢ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæˆ‘å»ºè®®ä½ å¯ä»¥é€šè¿‡ä¸‹è¾¹è¿™ä¸ªç›®å½•ç›´æ¥è·³å»æ„Ÿå…´è¶£çš„ç« èŠ‚é˜…è¯»ã€‚å¦å¤–ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯ Step by Step çš„ä»£ç æ•™å­¦èŒƒä¾‹ï¼Œå› æ­¤ï¼Œè·³è·ƒç« èŠ‚é˜…è¯»å¹¶ä¸ä¼šå½±å“ä½“éªŒã€‚

> æœ¬æ–‡ä¸­æåˆ°çš„æ‰€æœ‰é¡¹ç›®å‡åˆ—åœ¨æˆ‘çš„ GitHub Star æ¸…å•ä¸­ï¼Œå¯ä»¥åœ¨è¿™é‡Œç»Ÿä¸€æŸ¥é˜…ï¼š

[guo-yu's list / DApp Best Practice Stack (github.com)](https://github.com/stars/guo-yu/lists/dapp-best-practice-stack)

## 1. è®¤è¯†DappæŠ€æœ¯æ ˆ

ä¸ä¼ ç»Ÿçš„ Appï¼ˆåŒ…æ‹¬ Web App ä¸ Mobile Appï¼‰æœ€å¤§çš„ä¸åŒç‚¹åœ¨äºï¼ŒDApp çš„å¤§é‡åŠŸèƒ½ä¾èµ–ç›´æ¥ä¸æ™ºèƒ½åˆçº¦ï¼ˆä»¥ä¸‹ç®€ç§°åˆçº¦ï¼‰è¿›è¡Œäº¤äº’ã€‚æˆ‘ä»¬æ— æ³•ç›´æ¥ä½¿ç”¨å‰ç«¯ä»£ç è°ƒç”¨åˆçº¦ï¼Œå› æ­¤ï¼Œåœ¨å¼€å‘ DApp ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç†è§£è¿™ä¸€æŠ€æœ¯æ ˆä¸­å­˜åœ¨å“ªäº›æŠ€æœ¯ç»†èŠ‚ä»¥åŠå®ƒä»¬åˆ†åˆ«æ‰®æ¼”ä½•ç§è§’è‰²ã€‚

1.  **æ™ºèƒ½åˆçº¦**ï¼šé€šå¸¸æŒ‡ä»£è¿è¡Œåœ¨ EVM å…¼å®¹ç½‘ç»œä¸­çš„Â [Solidity](https://docs.soliditylang.org/)Â æˆ–å…¶ä»–åˆçº¦è¯­è¨€ä»£ç ï¼Œä»–ä»¬è´Ÿè´£ä¸ç”¨æˆ·äº¤æ˜“æˆ‘ä»¬å‘è¡Œçš„èµ„äº§å¹¶å‚¨å­˜ DApp çš„é“¾ä¸ŠçŠ¶æ€ã€‚
2.  **DApp**ï¼šæ•´åˆåˆçº¦æ¥å£ä»¥åŠå…¶ä»–åŠŸèƒ½çš„åº”ç”¨ç¨‹åºç•Œé¢ï¼Œç›®å‰ï¼Œå®ƒä»¬å¤§éƒ¨åˆ†æ˜¯ Web Appï¼Œä½ å¯ä»¥ç”¨æµè¡Œçš„æ¡†æ¶ä¾‹å¦‚Â [React](https://reactjs.org/)/[Vue](https://cn.vuejs.org/index.html)Â æ¥è¿›è¡Œç¼–å†™ã€‚
3.  **Provider/Signer**: è¿™æ˜¯ä¸€ä¸ª DApp æ¶æ„ä¸­ç‰¹æ®Šçš„è§’è‰²ï¼Œå®ƒè´Ÿè´£ä¸åŒºå—é“¾è¿›è¡Œé€šä¿¡ï¼Œå¹¶è¿›è¡Œåˆçº¦çš„è¯»/å†™æ“ä½œã€‚[Metamask](https://metamask.io/)Â æ˜¯ä¸€ä¸ªæµè¡Œçš„ InjectProviderï¼ˆWeb3Providerï¼‰ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»– JSON-RPC Provider ä¸åŒºå—é“¾è¿›è¡Œé€šä¿¡ã€‚
4.  **Relay**: è¿™ä¸ªè§’è‰²éšè—åœ¨ Provider/Signer ä¹‹åï¼Œæ˜¯çœŸæ­£è´Ÿè´£æˆ‘ä»¬ä¸åŒºå—é“¾çš„æŸä¸€ä¸ªèŠ‚ç‚¹åŒæ­¥çŠ¶æ€çš„æœåŠ¡å™¨é›†ç¾¤ï¼Œå®ƒä¿å­˜äº†æ‰€æœ‰è´¦æœ¬ï¼ˆå…¨èŠ‚ç‚¹ï¼Œarchive nodeï¼‰å®ƒé€šå¸¸æ˜¯Â [Infura](https://infura.io/)ã€[Alchemy](https://www.alchemy.com/)ã€[Quicknode](https://www.quicknode.com/)ã€[Moralis](https://moralis.io/)Â æˆ–è€…Â [Pocket](https://www.pokt.network/)Â æä¾›çš„æœåŠ¡ã€‚
5.  **æœåŠ¡ç«¯**ï¼ˆå¯é€‰ï¼‰ï¼šå¤§éƒ¨åˆ† DApp ä»ç„¶æœ‰ä»–ä»¬çš„æœåŠ¡ç«¯é€»è¾‘ï¼Œè¿™æ„å‘³ç€ï¼Œä½ éœ€è¦è‡ªå·±æ­å»ºæœåŠ¡ç¯å¢ƒï¼Œæˆ–ä½¿ç”¨æµè¡Œçš„ BasS/FaaS æœåŠ¡ï¼Œä½ å¯ä»¥ä½¿ç”¨æ·±åº¦æ•´åˆåŒºå—é“¾çš„ Moralis æ¥å®ŒæˆæœåŠ¡ç«¯çš„å¼€å‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æˆç†Ÿçš„Â [Firebase](https://firebase.google.com/docs?hl=zh-cn)Â ä½“ç³»ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‘æˆ˜å®Œå…¨ä¸ä¾èµ–æœåŠ¡ç«¯çš„æ–¹å¼æ¥æ„å»º DAppï¼Œå°±åƒ Uniswap æ‰€åšçš„é‚£æ ·ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“ç¼–å†™ä¸€ä¸ª DApp å¤§æ¦‚éœ€è¦å“ªäº›é¢†åŸŸçš„çŸ¥è¯†ï¼Œå¦‚æœä½ å·²ç»å†³å®šè¿ˆå‘ä¸‹ä¸€ä»£äº’è”ç½‘å¹¶æ‰“ç®—é—¯è¡ä¸€ç•ªï¼Œæˆ‘ä¼šåœ¨æ¥ä¸‹æ¥çš„å†…å®¹ä¸­ä»”ç»†ä»‹ç»è¿™äº›è§’è‰²åˆ†åˆ«éœ€è¦ç†è§£å“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Œæ¡†æ¶å’Œåº“ã€‚

è®©æˆ‘ä»¬å…ˆè¿›å…¥æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œ**æ™ºèƒ½åˆçº¦**ã€‚å¤§é‡ç¨‹åºå‘˜æœ›è€Œå´æ­¥çš„é‡è¦é—¨æ§›æ˜¯ï¼Œä»–ä»¬è®¤ä¸ºæ™ºèƒ½åˆçº¦éœ€è¦å­¦ä¹ ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œ**Solidity**ï¼Œè¿™æ¯«æ— ç–‘é—®ï¼Œæˆ‘éå¸¸æ¨èå…¥é—¨ Web3 çš„ç¨‹åºå‘˜â€”â€” æ— è®ºä½ æ˜¯ä»å“ªä¸€ä¸ªè½¯ä»¶å¼€å‘é¢†åŸŸè½¬å‹è€Œæ¥ â€”â€” ä» Solidity å…¥æ‰‹å­¦ä¹  DApp å¼€å‘ã€‚

åœ¨æ™ºèƒ½åˆçº¦çš„ç¼–ç æ–¹é¢ï¼Œæˆ‘ä»¬ç›®å‰æœ‰è®¸å¤šå·¥å…·ï¼Œä½†è®¤è¯†å’Œç†è§£ Solidity éå¸¸æœ‰å¿…è¦ï¼Œå¤§é‡çš„å·²ç»å­˜åœ¨çš„ï¼Œå’Œæµè¡Œçš„åˆçº¦éƒ½ä½¿ç”¨å®ƒè¿›è¡Œç¼–ç ï¼Œå› æ­¤ï¼Œå­¦ä¹  Solidity ä¸ä½†æœ‰åŠ©äºå¸®åŠ©ä½ ç†è§£åŒºå—é“¾å¼€å‘çš„åŸºæœ¬çŸ¥è¯†å’Œæ¦‚å¿µï¼Œè¿˜èƒ½è®©ä½ åœ¨è®¸å¤šä¼˜ç§€çš„å¼€å‘è€…å·²æœ‰çš„å“è¶Šå·¥ç¨‹ä¸Šå¿«é€Ÿèµ·æ­¥ã€‚

å°±ç¼–ç¨‹è¯­è¨€è€Œè¨€ï¼Œåœ¨ç›®å‰çš„ EVM å…¼å®¹é“¾ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨Â [Solidity](https://docs.soliditylang.org/en/v0.8.13/)Â æˆ–Â [Vyper](https://vyper.readthedocs.io/)Â è¿›è¡Œå¼€å‘ï¼Œåœ¨å…¶ä»– L1s åŒºå—é“¾ä¸Šï¼Œä¾‹å¦‚Â [Solana](https://solana.com/zh)ï¼Œä½ å¯ä»¥ä½¿ç”¨Â [Rust](https://www.rust-lang.org/)Â æ¥è¿›è¡Œåˆçº¦çš„å¼€å‘ï¼›åœ¨ Layer2 æ–¹æ¡ˆÂ [StarkNet](https://starkware.co/starknet/)Â ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨Â [Cairo](https://starkware.co/cairo/)Â æ¥è¿›è¡Œå¼€å‘ï¼›åœ¨ Arweave å‚¨å­˜ç½‘ç»œä¸­ï¼Œä¹Ÿå­˜åœ¨ç€ç±»ä¼¼Â [3em](https://github.com/three-em/3em)Â è¿™æ ·çš„è¿è¡Œç¯å¢ƒæ”¯æŒä½ ä½¿ç”¨ JavaScript æ¥ç¼–å†™åˆçº¦ã€‚

åœ¨è¿™äº›ç™¾èŠ±é½æ”¾çš„æ–¹æ¡ˆä¸­ï¼Œå®é™…ä¸Šå­˜åœ¨ç€ä¸¤ç§ä¸åŒçš„åˆçº¦è¿è¡Œç¯å¢ƒï¼ŒEVM æˆ–é EVM æ–¹æ¡ˆï¼Œå‰è€…çš„ä»£ç éƒ½ä¼šè¢«ç¼–è¯‘æˆ EVM bytecodeï¼Œè€Œåè€…åˆ™ä¼šé‡‡ç”¨å„ç§å„æ ·çš„ runtimeï¼Œå„æ˜¾ç¥é€šã€‚

è¿™ç¯‡æ–‡ç« ä¸ä¼šåœ¨åˆçº¦ç¼–ç¨‹è¯­è¨€ä¸Šè®¨è®ºå¤ªå¤šï¼Œæˆ‘è®¤ä¸ºï¼Œæˆ‘ä»¬ç›®å‰æ­£å¤„äºåˆçº¦ runtime çš„æˆ˜å›½æ—¶ä»£ï¼Œæ²¡æœ‰äººèƒ½æ–­è¨€å“ªç§åˆçº¦ç¼–ç¨‹è¯­è¨€çš„åœ°ä½ä¼šæˆä¸º Web ä¸–ç•Œçš„ JavaScriptã€‚ä½†å¯¹äºæ™ºèƒ½åˆçº¦ç¼–ç æ¥è¯´ï¼Œæˆ‘ä»¬å¿…é¡»è¦äº†è§£å’Œç†Ÿæ‚‰Â **Solidity**ï¼Œè¿™æ˜¯æ¯«æ— ç–‘é—®çš„ã€‚

å…³äº Solidityï¼Œæˆ‘æ¨èä½ ä»Â [Solidity by Example](https://solidity-by-example.org/)Â æ•™ç¨‹å¼€å§‹å­¦ä¹ ã€‚

è¿™ä¸€æ•™ç¨‹æ²¡æœ‰ç¹ççš„è¯­æ³•ä»‹ç»ï¼Œè€Œæ ¹æ®èŒƒä¾‹å¸®åŠ©è¯»è€…æŒæ¡åŸºæœ¬çŸ¥è¯†ï¼Œå› æ­¤ï¼Œå®Œæˆè¿™ä¸€æ•™ç¨‹å¤§çº¦åªéœ€è¦**ä¸åˆ°ä¸€ä¸ªå·¥ä½œæ—¥**ã€‚Solidity å¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹åˆ«å¤æ‚çš„è¯­è¨€ï¼Œåœ¨ä½¿ç”¨å®ƒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€æ­¥ç†è§£æ¯ä¸€é¡¹è¯­å¥çš„è¯­ä¹‰ï¼Œæˆ‘æ¨èä½ è®¾ç½®å¥½ç¼–ç ç¯å¢ƒåæŒ‰ç…§ç½‘ç«™ä¸Šçš„èŒƒä¾‹æ¥è¿›è¡Œå®è·µã€‚å½“ä½ å·²ç»æŒæ¡æ‰€æœ‰èŒƒä¾‹çš„å†™æ³•ä¹‹åï¼Œå¯ä»¥æ‰“å¼€ Solidity è¯­è¨€[å®˜æ–¹æ–‡æ¡£](https://docs.soliditylang.org/en/v0.8.13/)ï¼ˆ[ä¸­æ–‡](https://solidity-cn.readthedocs.io/zh/develop/)ï¼‰å¯¹ç…§ç¼–ç ä¸­çš„é”™è¯¯æ¥è¿›è¡Œé’ˆå¯¹æ€§çš„å­¦ä¹ ï¼š

ç†è§£å¹¶æŒæ¡æ™ºèƒ½åˆçº¦åï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥ DApp çš„ç¼–ç ï¼Œè¿™æ˜¯è®¸å¤šäº’è”ç½‘è¡Œä¸šä»ä¸šè€…çš„å¼ºé¡¹ï¼Œæˆ‘ä¸ä¼šåœ¨æ­¤èµ˜è¿°å…³äºå‰ç«¯ç¼–ç çš„ç»éªŒï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµè¡Œçš„å‰ç«¯æ¡†æ¶ï¼Œä¾‹å¦‚ React æˆ–è€… Vue æ¥è¿›è¡Œ DApp çš„ç¼–ç ã€‚æ¯«æ— ç–‘é—®ï¼Œä½ ä¼šéœ€è¦ä¸€äº›å‰ç«¯çš„æŠ€æœ¯æ ˆçŸ¥è¯†ï¼Œä¸»è¦æ˜¯ JavaScript ä¸ CSSã€‚

åœ¨æ­¤ï¼Œæˆ‘æƒ³å‘å¤§å®¶æ¨èä¸€äº›ä¼˜ç§€çš„å‰ç«¯åº“ï¼Œä½¿ç”¨è¿™äº›ä»£ç åº“æ¥è¿›è¡Œåˆçº¦äº¤äº’ï¼Œä¼šä½¿æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡äº‹åŠåŠŸå€ã€‚

ä»¥ React ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Â [wagmi](https://wagmi.sh/)Â æ¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„æ“ä½œåˆçº¦ï¼Œå®ƒé›†æˆäº†å¤§é‡åŸºç¡€ä½†å¤Ÿç”¨çš„ hooksï¼Œå¹¶æä¾›äº†ä¸å¤–éƒ¨Â `Provider/Signer`Â äº¤äº’çš„å¿«æ·å‡½æ•°ã€‚ä¸æ­¤åŒæ—¶ï¼Œ[wgami](https://wagmi.sh/)Â æ²¡æœ‰è¿‡å¤šçš„å¤–éƒ¨ä¾èµ–ï¼Œå®ƒçš„æ ¸å¿ƒä¾èµ–åªæœ‰Â [ethers.js](https://docs.ethers.io/v5/)

https://github.com/tmm/wagmi

å¦‚æœä½ ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶çˆ±å¥½è€…ï¼Œæƒ³è¦ä»é›¶å¼€å§‹æ„å»ºåº”ç”¨ç¨‹åºï¼Œä¸å¯é¿å…çš„ï¼Œä½ éœ€è¦ä½¿ç”¨Â [ethers.js](https://docs.ethers.io/v5/)Â æˆ–è€…Â [web3.js](https://web3js.readthedocs.io/en/v1.7.3/)Â æ¥è¿›è¡ŒåŸºæœ¬æ“ä½œã€‚ä»æˆ‘è‡ªå·±çš„ä½¿ç”¨ç»éªŒæ¥çœ‹ï¼Œæˆ‘æ›´æ¨è ethers.js [Documentation (ethers.io)](https://docs.ethers.io/v5/)

[web3.js - Ethereum JavaScript API â€” web3.js 1.0.0 documentation (web3js.readthedocs.io)](https://web3js.readthedocs.io/en/v1.8.0/)

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å…¶ä»–çš„åº“ä¸ºæˆ‘ä»¬æä¾›ä¸“é—¨çš„Â `Provider/Signer`Â æ”¯æŒï¼Œå¦‚æœä½ æ‰“ç®—æ”¯æŒæ›´å¤šå¤æ‚çš„ Providerï¼Œæˆ–è€…åŒæ—¶æ”¯æŒå¤šç½‘ç»œ Provider/Signer çš„è¯»å†™åŠŸèƒ½ï¼Œç±»ä¼¼Â [Apeboard](https://apeboard.finance/)Â ä¸ºå®ƒçš„ç”¨æˆ·æä¾›è·¨åŒºå—é“¾çš„æ•°æ®å±•ç°ï¼Œå¯ä»¥å‚è€ƒÂ [react-web3](https://github.com/NoahZinsmeister/web3-react)Â æˆ–è€…Â [w3modal](https://github.com/Web3Modal/web3modal)Â ä¸¤ä¸ªæµè¡Œçš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—æä¾›äº†ä¸€äº›å¥½ç”¨çš„åŠŸèƒ½ï¼Œä½†ä»–ä»¬çš„è®¾è®¡ä¸å¤Ÿè§£è€¦ï¼Œæœ‰æ—¶ä¼šå¸¦æ¥ä¸å¿…è¦çš„ bugï¼Œå¯¹æ­¤ï¼Œæˆ‘ä¿æŒè°¨æ…æ¨èã€‚

[Uniswap/web3-react: A simple, maximally extensible, dependency minimized framework for building modern Ethereum dApps (github.com)](https://github.com/Uniswap/web3-react)

[WalletConnect/web3modal: A single Web3 provider solution for all Wallets (github.com)](https://github.com/WalletConnect/web3modal)

è¿›ä¸€æ­¥ï¼Œå¦‚æœä½ æƒ³ä¸æƒ³æ”¯æŒå¤–éƒ¨Â `Provider/Signer`ï¼Œè€Œä¸ºè‡ªå·±çš„ç”¨æˆ·æ„å»ºä¸€ä¸ª Web é’±åŒ…ï¼Œä½ å¯ä»¥ä½¿ç”¨ ethers.js ä»é›¶å¼€å§‹æ„å»ºã€‚

å¦‚æœä½ æƒ³ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ª onboard ä½“éªŒæ›´å¥½ï¼ˆä½†æ›´ä¸å»ä¸­å¿ƒåŒ–ï¼‰çš„æ‰˜ç®¡é’±åŒ…ç³»ç»Ÿï¼Œè®©ä»–ä»¬å¯ä»¥ä»æ™®é€šçš„è´¦æˆ·å¯†ç æˆ–è€…ç¤¾äº¤ç½‘ç»œè´¦æˆ·æ¥ç™»å½•ä½ çš„ DAppï¼Œå¯ä»¥é€‰æ‹©é‡‡ç”¨Â [Web3Auth](https://web3auth.io/)Â æˆ–Â [MagicLink](https://magic.link/)Â çš„æ–¹æ¡ˆã€‚æ‰˜ç®¡é’±åŒ…ç³»ç»Ÿæ˜¯ä¸€ä¸ªéå¸¸å¤§çš„è¯é¢˜ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒä¸Šè¿°ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆè‡ªè¡Œç ”ç©¶ã€‚

[Home (web3auth.io)](https://web3auth.io/)

[Web3 Wallet Onboarding & Auth SDKs | Magic](https://magic.link/)

åœ¨ç†è§£åˆçº¦ä»¥åŠ DApp ä½¿ç”¨ä½•ç§æ–¹å¼ä¸åŒºå—é“¾è¿›è¡Œäº¤äº’åï¼Œå¼€å‘è€…å¾ˆå¿«ä¼šæ„è¯†åˆ°ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰é€šè¿‡åœ¨æœ¬åœ°å»ºç«‹ä¸€ä¸ªèŠ‚ç‚¹çš„æ–¹å¼æ¥ä¸åŒºå—é“¾è¿›è¡Œæ“ä½œã€‚å¦‚æœä½ åœ¨æœ¬åœ°éƒ¨ç½²è¿‡Â [IPFS](https://ipfs.io/)ï¼Œä½ ä¼šå¾ˆå¿«å‘ç°å®ƒä¼šé»˜è®¤åœ¨æœ¬åœ°åŒæ­¥èŠ‚ç‚¹ï¼Œå°±åƒ BT ä¸‹è½½è½¯ä»¶é‚£æ ·ã€‚è¿™æ˜¯å¦æ„å‘³ç€æˆ‘ä»¬çš„ DApp ä¸å¤Ÿã€Œå»ä¸­å¿ƒåŒ–ã€å‘¢ï¼Ÿ

å®é™…ä¸Šï¼Œä»ç„¶æœ‰å¤§é‡çš„è½¯ä»¶åŸºäºæœ¬åœ°çš„å…¨èŠ‚ç‚¹æ¥è¿›è¡Œäº¤äº’ï¼Œåªæ˜¯ï¼Œå¯¹äºå¤§éƒ¨åˆ†å¼€å‘è€…è€Œè¨€ï¼Œä»–ä»¬æ”¾å¼ƒäº†è¿™æ ·çš„æƒåˆ©ï¼Œè€Œè½¬è€Œä½¿ç”¨æ›´ä¾¿åˆ©çš„Â **Relay Network**Â ä¸åŒºå—é“¾è¿›è¡Œé€šä¿¡ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬èŠ‚çœäº†éƒ¨ç½²æˆæœ¬ï¼Œå¹¶ä¸”ä¸å†éœ€è¦ç»´æŠ¤èŠ‚ç‚¹çš„çŠ¶æ€ç¼“å­˜ï¼Œå¯¹äºå¿«é€Ÿæ„å»º DApp æ¥è¯´ï¼Œé€‰æ‹©ä¸€ä¸ªé è°±çš„ Relayï¼Œæ˜¯æ— å¯éè®®çš„æ–¹æ¡ˆã€‚

ä½¿ç”¨ Relay Network ä¸éœ€è¦ç‰¹æ®Šçš„çŸ¥è¯†ï¼Œåœ¨å‰ç«¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Šè¿°æåŠçš„ä»£ç åº“ï¼ˆethers.js æˆ–è€… web3.jsï¼‰ä¸ Relay è¿›è¡Œäº¤äº’ï¼›åœ¨æœåŠ¡ç«¯ï¼Œå¦‚æœä½ ä½¿ç”¨ Node è¿è¡Œç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‹·è´å‰ç«¯çš„ä»£ç æ¥ä½¿ç”¨ã€‚å¦‚æœä½ ä½¿ç”¨å…¶ä»–çš„è¿è¡Œç¯å¢ƒï¼Œä½ å¯èƒ½ä¼šéœ€è¦ä¸€äº›ç‰¹å®šçš„ JSON-RPC å‡½æ•°åŒ…è£…ï¼Œä»¥è®¿é—®è¿™äº› Relayã€‚

**[Infura](https://infura.io/)**Â æ˜¯ä¸–ç•Œä¸Šæœ€æ—©å’Œæœ€å¤§çš„ä»¥å¤ªåŠ Relay Networkï¼Œå®ƒæä¾›ä¸€äº›å…¬å¼€çš„ Gateway èŠ‚ç‚¹ï¼Œä½†ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦è·å–å±äºè‡ªå·±çš„ DAppÂ **Access Key**Â å¹¶ä¸ºè¿™äº›è®¿é—®æƒé™è®¾ç½® origin å’Œ IP é™åˆ¶ï¼Œä»¥æå‡ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„ DApp ç”¨æˆ·çš„è®¿é—®é€Ÿåº¦ä½“éªŒã€‚Infura ç›®å‰æ”¯æŒ ETHï¼ŒETH2 ç½‘ç»œï¼Œä»¥åŠ IPFS å’Œ Filecoin ä¸¤ä¸ªåˆ†å¸ƒå¼å‚¨å­˜æ–¹æ¡ˆã€‚

[Ethereum API | IPFS API & Gateway | ETH Nodes as a Service (infura.io)](https://infura.io/)

**[Alchemy](https://www.alchemy.com/)**Â ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ Relay Networkï¼Œå®ƒåœ¨ Infura çš„åŠŸèƒ½ä¸Šæ›´è¿‘ä¸€æ­¥ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ç›¸å½“å¤šå®ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚è°ƒè¯•å·¥å…·ï¼ŒåŒºå—çŠ¶æ€æ¨é€ä¸ä¸°å¯Œçš„ Webhooksã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼ŒAlchemy ä¸æ˜¯ä¸€ä¸ªå•çº¯çš„ Relay Networkï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ª SaaS æœåŠ¡ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„è‡ªå®šä¹‰ JSON-RPC æ–¹æ³•ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬çš„å‡½æ•°åº“ä¸å®ƒçš„ç¼“å­˜ç½‘ç»œè¿›è¡Œäº¤äº’ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸åŒºå—é“¾èŠ‚ç‚¹è¿›è¡Œäº¤äº’ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæå‡äº†è§†å›¾ï¼ˆviewï¼‰æ–¹æ³•çš„è®¿é—®é€Ÿåº¦ï¼Œä½†ä¾èµ– Alchemy ç‹¬æœ‰çš„ JSON-RPC æ–¹æ³•ï¼Œä¹Ÿè®© DApp å˜å¾—æ›´åŠ ä¸­å¿ƒåŒ–äº†ã€‚

[Alchemy - the web3 development platform](https://www.alchemy.com/)

æˆ‘ä¸ä¼šåœ¨è¿™é‡Œè¯„åˆ¤å»ä¸­å¿ƒåŒ–çš„ã€Œé“å¾·é—®é¢˜ã€ï¼Œå„ä½è¯»è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„å¼€å‘æ—¶é—´å‘¨æœŸï¼Œé£é™©åå¥½å’Œä½¿ç”¨ä¹ æƒ¯æ¥å†³å®šä½•ç§æœåŠ¡é€‚åˆè‡ªå·±ï¼Œå¹¶ä¸ºè‡ªå·±çš„å®¢æˆ·ä¸ç”¨æˆ·æä¾›æ›´å¥½çš„æœåŠ¡ã€‚

åœ¨ Relay Network æ–¹é¢ï¼Œæˆ‘æƒ³å†æ¨èä¸€ä¸ªæœåŠ¡ï¼š

[Moralis Web3 - Enterprise-Grade Web3 APIs](https://moralis.io/)

[Moralis](https://moralis.io/)Â é›†æˆäº†è®¸å¤š FaaS çš„åŠŸèƒ½åˆ°ä»–ä»¬çš„ Relay Network ä¸­ï¼Œè¿™ä½¿å¾—ä½ å¯ä»¥å¿«é€Ÿåœ¨æœåŠ¡ç«¯è®¿é—®åŒºå—é“¾çš„çŠ¶æ€ï¼Œè€Œä¸éœ€è¦åå¤è°ƒç”¨ç¬¬ä¸‰æ–¹ç½‘ç»œçš„ APIï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£è€Œå®ç”¨çš„æ–¹æ¡ˆï¼Œä»–ä»¬çš„å®šä½æ˜¯ Web3 çš„ Firebaseï¼Œæˆ‘å¸Œæœ›ä»–ä»¬èƒ½å¤Ÿå°†è½¯ä»¶è´¨é‡å’Œå¯ç”¨æ€§çœŸæ­£æå‡åˆ° Firebase çš„æ°´å¹³ï¼Œé‚£è¿™å°±ä¼šæ˜¯ä¸€ä»¶éå¸¸æ£’çš„äº‹å„¿ã€‚

åœ¨æœ¬æ–‡ç¼–å†™çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¾—çŸ¥ Google Cloud Platform ä¹Ÿæ­£åœ¨ç»„å»ºä»–ä»¬çš„Â [Web3 å›¢é˜Ÿ](https://www.cnbc.com/2022/05/06/googles-cloud-group-forms-web3-product-and-engineering-team.html)ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æœ‰å¯èƒ½åœ¨ä¸ä¹…çš„å°†æ¥èƒ½åœ¨Â [Firebase](https://firebase.google.com/?hl=zh-cn)Â æˆ–è€… GAE æœåŠ¡ä¸Šä½¿ç”¨åˆ° Google çš„ Relay æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥ä¿æŒé€‚å½“çš„å…³æ³¨ã€‚

---

æœåŠ¡ç«¯æ–¹é¢ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿è¡Œç¯å¢ƒå’Œè½¯ä»¶æ¶æ„ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„é™åˆ¶ï¼Œåªè¦ä¿è¯ä½ é€‰æ‹©çš„æŠ€æœ¯æ ˆèƒ½å’Œæœ¬åœ°èŠ‚ç‚¹æˆ–è€…ï¼ˆé€šå¸¸æ˜¯ï¼‰Relay Network è¿›è¡Œäº¤äº’å³å¯ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä¼šé€‰æ‹© Node è¿è¡Œç¯å¢ƒã€‚è¯´äº›é¢˜å¤–è¯ï¼Œç”±äºå¤§éƒ¨åˆ†åˆçº¦ä½¿ç”¨ NPM æ¥è¿›è¡ŒåŒ…ç®¡ç†ï¼Œå¹¶ä½¿ç”¨Â [hardhat](https://hardhat.org/)Â æ¥åšç¼–è¯‘å’Œæµ‹è¯•å·¥ä½œæµï¼Œä½¿ç”¨ JavaScript å·²ç»æˆä¸ºæ™ºèƒ½åˆçº¦ç¼–ç ä¸­å¿…ä¸å¯å°‘çš„ä¸€ä¸ªç¯èŠ‚ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œåœ¨æœåŠ¡ç«¯åŒæ—¶ä½¿ç”¨ JavaScript è¯­è¨€æœ‰åŠ©äºæˆ‘ä»¬å¤ç”¨ä»£ç ï¼Œç•™å‡ºæ›´å¤šçš„æ—¶é—´äº«å—äººç”Ÿã€‚

ç¼–å†™æœåŠ¡ç«¯å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬éœ€è¦åšå®Œæ‰€æœ‰äº‹ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨ DApp çš„æœåŠ¡ç«¯ä»£ç æ¥å‚¨å­˜æ²¡å¿…è¦å‚¨å­˜åœ¨åˆçº¦ä¸­çš„ã€Œé“¾ä¸‹çŠ¶æ€ã€ã€‚åœ¨åˆçº¦ä¸­å‚¨å­˜æ•°æ®æ˜¯ååˆ†æ˜‚è´µçš„é€‰æ‹©ï¼ˆè‡³å°‘ç›®å‰çœ‹æ¥ï¼‰è¿™ç§æ˜‚è´µä¸ä»…æ¶‰åŠåˆ°æˆ‘ä»¬éƒ¨ç½²åˆçº¦ä¸­äº§ç”Ÿçš„è´¹ç”¨ï¼Œè¿˜æ¶‰åŠåˆ°æ¯ä¸€æ¬¡ä¿®æ”¹çŠ¶æ€çš„å‡½æ•°è¯·æ±‚å¸¦æ¥çš„ï¼Œç”¨æˆ·éœ€è¦ä»˜å‡ºçš„ gas æˆæœ¬ã€‚æ‰€ä»¥ï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è‡ªå·±çš„æœåŠ¡ç«¯æ¥å‚¨å­˜è¿™äº›ã€Œé“¾ä¸‹çŠ¶æ€ã€

ä½¿ç”¨ä¸€ä¸ªå¥å£®çš„ FaaS å¯¹è®¸å¤šå·¥ç¨‹å¸ˆæ¥è¯´æ˜¯ç®€å•è€Œä¸”å®ç”¨çš„é€‰æ‹©ï¼Œæˆ‘æ¨è Firebaseï¼Œå¦‚æœä½ æƒ³ä½“éªŒæ·±åº¦é›†æˆåŒºå—é“¾çš„ FaaSï¼Œä¹Ÿå¯ä»¥å‚è€ƒä¸Šè¿°æåŠçš„ Moralisã€‚

[Firebase (google.com)](https://firebase.google.com/)

æˆ‘é€‰æ‹© Firebase çš„ä¸»è¦åŸå› æ˜¯ä»–ä»¬æä¾›æˆæœ¬ä½å»‰ï¼ŒæœåŠ¡å®Œå–„å’Œç¨³å®šçš„å¥å£® APIï¼ŒåŒæ—¶ï¼Œä»–ä»¬é’ˆå¯¹å¼€å‘è€…å¼€å‘äº†åŠŸèƒ½é½å…¨çš„æœ¬åœ°æ¨¡æ‹Ÿæµ‹è¯•å¥—ä»¶ï¼Œè¿™ä¼šèŠ‚çœæˆ‘ä»¬ç›¸å½“å¤šçš„æ—¶é—´ã€‚

[Introduction to Firebase Local Emulator Suite (google.com)](https://firebase.google.com/docs/emulator-suite)

FaaS åœ¨å¸‚é¢ä¸Šæœ‰å¤ªå¤šå¯é€‰çš„æ–¹æ¡ˆï¼Œä½ å¯ä»¥ä¾èµ–ä¸€ä¸ªå…¨åŠŸèƒ½ FaaSï¼Œä¹Ÿå¯ä»¥å°†è‡ªå·±ä¸ºæ•°ä¸å¤šçš„ã€Œé“¾ä¸‹çŠ¶æ€ã€å‚¨å­˜åœ¨ headless CMS å½“ä¸­ï¼Œä¾‹å¦‚ Vercel æˆ–è€… Netlifyã€‚

[Develop. Preview. Ship. For the best frontend teams â€“ Vercel](https://vercel.com/)

[Netlify: Develop & deploy the best web experiences in record time](https://www.netlify.com/)

æˆ–è€…ï¼Œå¦‚æœä½ å¸Œæœ›è‡ªå·±æ­å»º FaaS æœåŠ¡å™¨ï¼Œä»¥è·å¾—æ›´å®Œå–„çš„æ§åˆ¶ä¸æ›´ä½çš„æˆæœ¬ï¼Œæˆ‘å‘ä½ æ¨èä¸€äº› Firebase çš„å¼€æºæ›¿ä»£å“ï¼Œä¾‹å¦‚ Supabase:

[supabase/supabase: The open source Firebase alternative. Follow to stay updated about our public Beta. (github.com)](https://github.com/supabase/supabase)

## 2. æ™ºèƒ½åˆçº¦ç¼–ç 

åœ¨è¿™ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬ä¼šä» Solidity è¯­è¨€å…¥æ‰‹ï¼Œç†è§£ç¼–å†™ä¸€ä¸ªæ™ºèƒ½åˆçº¦ä¸ä¼ ç»Ÿçš„åº”ç”¨è½¯ä»¶æˆ–ç•Œé¢æœ‰ä½•ä¸åŒï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸Šä¸€ç« èŠ‚æåˆ°çš„å…¶ä»–æ™ºèƒ½åˆçº¦ç¼–ç¨‹è¯­è¨€ï¼Œä½†æœ¬ç« èŠ‚å°†ä½¿ç”¨ Solidityï¼ˆä»¥ä¸‹ç®€ç§° Solï¼‰ ä½œä¸ºèŒƒä¾‹é˜è¿°æ™ºèƒ½åˆçº¦ç¼–ç ä¸­åº”å½“æ³¨æ„çš„é—®é¢˜ã€‚

åœ¨æ­¤ï¼Œæˆ‘ä¸ä¼šé€è¡Œé€å¥è§£é‡Š Sol è¯­è¨€çš„è¯­ä¹‰ç»†èŠ‚ï¼Œå› æ­¤ï¼Œé˜…è¯»è¿™ä¸€ç« è¦æ±‚ä½ æœ‰èµ·ç çš„ Sol è¯­è¨€çŸ¥è¯†ã€‚æˆ‘å»ºè®®ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œè¯·å‚è€ƒå¹¶è¯»å®Œæ‰€æœ‰çš„Â [Solidity Examples](https://solidity-by-example.org/)ï¼š

### 2.1 åˆçº¦ç‰¹å¾

**äº‹åŠ¡æ€§**ï¼šæˆ‘ä»¬å¯ä»¥å°†åŒºå—é“¾çœ‹æˆæ˜¯ä¸€ä¸ªäº‹åŠ¡æ€§æ•°æ®åº“ï¼Œè¿™æ„å‘³ç€ï¼Œè¦ä¹ˆæˆ‘ä»¬åœ¨åˆçº¦ä¸­ç¼–å†™çš„å‡½æ•°å…¨éƒ¨è¢«æ‰§è¡Œï¼ŒçŠ¶æ€ä¾æ¬¡è¢«ä¿®æ”¹ï¼Œè¦ä¹ˆï¼Œæ‰€æœ‰çš„çŠ¶æ€éƒ½ä¼šå›æ»šåˆ°å½“åˆæœªæ›¾è¢«ä¿®æ”¹çš„æ ·å­ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬åœ¨å¯¹æ™ºèƒ½åˆçº¦è¿›è¡Œç¼–ç çš„è¿‡ç¨‹ä¸­ï¼Œè¦ååˆ†æ³¨æ„å‡½æ•° API çš„è®¾è®¡ï¼Œåœ¨å…·ä½“çš„å‡½æ•°ä¸­ï¼Œä¸åº”å½“å¯¹å‚æ•°è¿›è¡Œé‡è½½ã€‚åŒæ—¶ï¼Œä¹Ÿæ„å‘³ç€æˆ‘ä»¬åœ¨è¿›è¡Œé”™è¯¯å¤„ç†æ—¶è¦ååˆ†å°å¿ƒã€‚

**é”™è¯¯å¤„ç†**ï¼šæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸¤ç§å¸¸ç”¨çš„é”™è¯¯å¤„ç†æ–¹å¼ï¼Œ`require(condition, ERR_MESSAGE)`Â æˆ–è€…Â `revert customError()`ï¼Œå‰è€…ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä»£è¡¨é”™è¯¯ï¼Œåè€…å¯ä»¥è‡ªå®šä¹‰é”™è¯¯ç±»å‹ã€‚ä¸¤ç§æ–¹å¼å¹¶æ— æœ¬è´¨ä¸Šçš„ä¸åŒï¼Œå¹¶ä¸”éƒ½ä¼šå¯¼è‡´Â `tx`Â å¤±è´¥ã€‚å¯¹äºå‰ç«¯è€Œè¨€ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è‡ªå®šä¹‰é”™è¯¯ç±»å‹æ¥æ•è·è¿™ä¸¤ç§é”™è¯¯ã€‚

**è¿è¡Œæˆæœ¬**ï¼šåˆçº¦çš„çŠ¶æ€å‚¨å­˜ä¼šæ¶ˆè€— Gas è´¹ç”¨ï¼ˆåŒºå—é“¾çš„æ¿€åŠ±æœºåˆ¶ï¼Œä½œä¸ºä»˜ç»™è¿è¡ŒèŠ‚ç‚¹çš„è®¡ç®—ä¸å‚¨å­˜è´¹ç”¨ï¼‰ä¸ºæ­¤ï¼Œåœ¨è®¾è®¡å‚¨å­˜å¯¹è±¡æ—¶ï¼Œå¦‚ä½•å–„ç”¨å£°æ˜çš„å†…å­˜æ˜¯éœ€è¦è¢«è€ƒè™‘çš„é—®é¢˜ä¹‹ä¸€ã€‚ç®€å•çš„æ³•åˆ™æ˜¯ï¼Œä¸è¦ä¸ºä¸éœ€è¦çš„çŠ¶æ€å£°æ˜è¿‡å¤šçš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœä½ éœ€è¦ä¼˜åŒ–ä¸€ä¸ªåˆçº¦çš„è¿è¡Œæˆæœ¬ï¼Œå¯ä»¥è€ƒè™‘å‚è€ƒè®¸å¤šåˆçº¦ä½¿ç”¨å†…è”æ±‡ç¼–æ¥ä¼˜åŒ–å†…å­˜å ç”¨ã€‚

ä¸ºæ­¤ï¼Œåˆçº¦ä¸­çš„å¤æ‚æ•°æ®ç»“æ„å¿…é¡»å£°æ˜å‚¨å­˜ç©ºé—´ä½ç½®ï¼Œä¾‹å¦‚Â `storage`,Â `memory`,Â `calldata`ï¼Œæ¯ç§ä½ç½®æ‰€äº§ç”Ÿçš„è´¹ç”¨ä¼šæœ‰å¾ˆå¤§ä¸åŒã€‚åˆçº¦çš„å‡½æ•°ä¹Ÿä¼šæœ‰å¯¹åº”çš„å‡½æ•°ç±»å‹å£°æ˜ï¼Œ`view`Â å‡½æ•° ä¸Â `pure`Â å‡½æ•°åœ¨å¤–éƒ¨è°ƒç”¨æ—¶ä¸éœ€è¦æ‰¿æ‹… gas è´¹ç”¨ï¼Œä½†æ”¹å˜çŠ¶æ€çš„å‡½æ•°éƒ½éœ€è¦æ¶ˆè€— gasã€‚

> æ³¨æ„ï¼šç”±äºåˆçº¦è¿è¡Œå’Œå‚¨å­˜æˆæœ¬é«˜ï¼Œè®¸å¤šå¯¹å¤–éƒ¨ç™½åå•è¿›è¡Œç®¡ç†çš„æœ€ä½³å®è·µæ˜¯ä½¿ç”¨ MerkleProofï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒçš„[åˆçº¦å®ç°](https://docs.openzeppelin.com/contracts/3.x/api/cryptography#MerkleProof)å’ŒÂ [JavaScript å®ç°](https://github.com/miguelmota/merkletreejs)ã€‚

**ä¸å¯å˜**ï¼šåˆçº¦ä¸€æ—¦éƒ¨ç½²ï¼Œå°±æ— æ³•åŠ¨æ€æ›¿æ¢æˆ–è¿›è¡Œå‡çº§ï¼Œè¿™æ„å‘³ç€ï¼Œä½ éœ€è¦åœ¨éƒ¨ç½²å‰è€ƒè™‘æ˜¯å¦è¦ä¾èµ–å¯å‡çº§æ¶æ„ï¼ˆ`Proxy`Â éƒ¨ç½²æ–¹æ¡ˆï¼‰è¿™äº›æ–¹æ¡ˆæ‰€ä¾èµ–çš„åˆçº¦å’ŒæŠ½è±¡åˆçº¦ï¼Œéƒ½éœ€è¦éµå¾ªåŒä¸€ç§åˆå§‹åŒ–èŒƒå¼ï¼Œæ‰èƒ½ä¿è¯åˆçº¦çš„å¯å‡çº§æ€§ã€‚

**æƒé™å’Œå¯è§æ€§**ï¼šåˆçº¦ä¸åŒäºæœåŠ¡ç«¯ä»£ç ï¼Œå®ƒå¯¹ç½‘ç»œä¸­çš„æ‰€æœ‰äººæ˜¯é€æ˜çš„ï¼Œè¿™é‡Œçš„é€æ˜ä¸ä»…æŒ‡çš„æ˜¯åˆçº¦çš„å­—èŠ‚ç ï¼Œè¿˜åŒ…æ‹¬å®ƒçš„**å…¬å¼€**å’Œ**ç§æœ‰çŠ¶æ€**ã€‚è¿™æ„å‘³ç€ï¼Œä½ ä¸åº”å½“åœ¨åˆçº¦ä¸­å‚¨å­˜ä»»ä½•æ•æ„Ÿæ•°æ®ï¼Œä¹Ÿä¸åº”å½“ä¾èµ–åŒºå—å½“ä¸­çš„ä»»ä½•çŠ¶æ€ï¼ˆæ¯”å¦‚åŒºå—é«˜åº¦å’Œæ—¶é—´æˆ³ï¼‰ä½œä¸ºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„åˆ¤æ–­åŸºå‡†ã€‚

ä¸ºæ­¤ï¼Œå‘å¸ƒä¸€ä¸ªæœªç»æƒé™æ§åˆ¶çš„åˆçº¦æ˜¯ååˆ†å±é™©çš„ï¼Œä»»ä½•å¤–éƒ¨è´¦æˆ·éƒ½å¯ä»¥è½»æ˜“åœ°å¯¹æŸä¸ªåˆçº¦è¿›è¡Œä¿®æ”¹ï¼Œå¹¶é€šè¿‡å‘é€æ¶ˆè€—åˆçº¦æŒ‡ä»¤å°†åˆçº¦ä¸­çš„èµ„äº§è½¬èµ°ã€‚æ‰€ä»¥ï¼Œé™¤äº†ç‰¹å®šçš„æ²»ç†åˆçº¦ä¸å—æƒé™ç®¡åˆ¶ä»¥å¤–ï¼Œæˆ‘æ¨èä»»ä½•åˆçº¦éƒ½å¿…é¡»è‡³å°‘ä¾èµ–Â [Ownable](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/access/Ownable.sol)Â æ¥è¿›è¡ŒåŸºæœ¬çš„æƒé™é…ç½®ï¼ŒåŒæ—¶ï¼Œå¤æ‚åˆçº¦å¯ä»¥ä½¿ç”¨Â [AccessControl](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/access/AccessControl.sol)Â æ¥è¿›è¡Œç®¡ç†ã€‚

**å®‰å…¨æ€§**ï¼šå¦‚ä¸Šæ‰€è¿°ï¼Œåˆçº¦çš„å®‰å…¨æ€§æ˜¯éå¸¸é‡è¦å’Œä¸¥è°¨çš„é—®é¢˜ï¼Œåœ¨å°†åˆçº¦å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒç½‘ç»œä¹‹å‰ï¼Œç¡®ä¿ä½ å·²é˜…è¯» ConsenSys ç¼–å†™çš„[åˆçº¦ä»£ç å®‰å…¨æœ€ä½³å®è·µæŒ‡å—](https://github.com/ConsenSys/smart-contract-best-practices)å¹¶éµå®ˆå…¶ä¸­æ‰€æœ‰çš„çº¦å®šï¼ŒåŒæ—¶ï¼Œç¡®ä¿åˆçº¦æœ‰è¶³å¤Ÿçš„æµ‹è¯•ç”¨ä¾‹å¹¶ä¸”è¾ƒé«˜çš„æµ‹è¯•è¦†ç›–åº¦ã€‚è¯·ä¸è¦å¸¦æœ‰ä¾¥å¹¸å¿ƒç†å‘å¸ƒæœªç»ä»»ä½•æµ‹è¯•çš„åˆçº¦ä»£ç ï¼Œå¹¶ä¸»è§‚åœ°å¸Œæœ›å®ƒèƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚

### 2.2 åˆçº¦ä¾èµ–ä¸è°ƒç”¨

**ä¾èµ–å¼•å…¥**ï¼šåˆçº¦å¯ä»¥é€šè¿‡Â `import`Â å¼•å…¥ä¾èµ–çš„å¤–éƒ¨åˆçº¦ï¼ŒæŠ½è±¡åˆçº¦ï¼ŒInterface æˆ–è€…åº“ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨ npm ç®¡ç†åˆçº¦çš„å¤–éƒ¨ä¾èµ–ï¼Œç®¡ç†åˆçº¦çš„ä¾èµ–ä¹Ÿæœ‰å…¶ä»–åŠæ³•ï¼ˆä¾‹å¦‚ git submoduleï¼‰è¿™ä¼šåœ¨å·¥ä½œæµç« èŠ‚ä¸­è¯¦ç»†å™è¿°ã€‚

**è°ƒç”¨**ï¼šåˆçº¦å¯ä»¥è°ƒç”¨å…¶ä»–åˆçº¦ï¼Œåªéœ€çŸ¥é“åœ°å€å’Œ ABIï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åˆçº¦å†…éƒ¨è°ƒç”¨å…¶ä»–åˆçº¦ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè°ƒç”¨åˆçº¦ä¹Ÿæ˜¯äº‹åŠ¡æ€§æ“ä½œï¼Œå› æ­¤ï¼Œä½ ä¸éœ€è¦é€šè¿‡æ‰‹åŠ¨ç®¡ç†å¼‚æ­¥æ“ä½œçš„æ–¹å¼æ¥ç­‰å¾…è¿”å›ç»“æœã€‚åœ¨åˆçº¦å†…éƒ¨è°ƒç”¨å…¶ä»–åˆçº¦éœ€è¦æ¶ˆè€—é¢å¤–çš„ Gas è´¹ç”¨ã€‚è°ƒç”¨åˆçº¦å¯èƒ½ç”±äº ABI é”™è¯¯æˆ–è€…ä¸æ”¯æŒæŸä¸ªå‡½æ•°æ–¹æ³•è€Œå¯¼è‡´å¤±è´¥ï¼Œä½† Gas è´¹ç”¨å¹¶ä¸ä¼šè¿”è¿˜ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨è°ƒç”¨å…¶ä»–ç¬¬ä¸‰æ–¹åˆçº¦å‰ç†è§£å¯¹æ–¹åˆçº¦çš„æ¥å£ï¼ˆåŒ…æ‹¬å‚æ•°ç±»å‹ï¼Œé¡ºåºï¼Œè¿”å›ç»“æ„ï¼‰

å¦‚æœä½ è¯•å›¾è°ƒè¯•æœ¬åœ°åˆçº¦è°ƒç”¨æŸä¸ªç”Ÿäº§ç¯å¢ƒçš„çº¿ä¸Šåˆçº¦ï¼Œå¯ä»¥ä½¿ç”¨ fork çš„æ–¹å¼å°†æŸä¸ªé«˜åº¦çš„åŒºå—é“¾ä¸‹è½½åˆ°æœ¬åœ°è¿è¡Œï¼Œè¿™ä¼šåœ¨å·¥ä½œæµç« èŠ‚ä¸­è¯¦ç»†å™è¿°ã€‚

**ABI**ï¼šä¹Ÿå«åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£ï¼ˆApplication Binary Interfaceï¼‰ABI æ˜¯æˆ‘ä»¬ç†è§£å¦‚ä½•æ“ä½œä¸€ä¸ªåˆçº¦çš„å…·ä½“æ–¹æ³•çš„æè¿°ï¼Œé€šå¸¸åœ¨ Interface æ–‡ä»¶ä¸­è¢«å®šä¹‰ï¼ˆå¦‚æœåˆçº¦å‘½åä¸ºÂ `Membership.sol`ï¼Œé‚£ä¹ˆå®ƒçš„ Interface æ–‡ä»¶é€šå¸¸å«åšÂ `IMembership.sol`ï¼‰

> æ³¨æ„ï¼šé€šè¿‡è¿™ç§æ–¹å¼å®šä¹‰å¯ä»¥è®©ä»»æ„åˆçº¦é€šè¿‡å¼•ç”¨ interface çš„æ–¹å¼æ¥è°ƒç”¨ä½ çš„åˆçº¦ï¼Œä½†å¦‚æœä½ ä¸åœ¨ Interface ä¸­æ–‡ä»¶å®šä¹‰å®ƒï¼Œç¼–è¯‘å™¨ä¹Ÿèƒ½å¸®åŠ©ä½ ç¼–è¯‘å‡º ABIã€‚

æˆ‘ä»¬å¯ä»¥ä¾èµ–å®Œæ•´çš„ ABI æ¥è°ƒç”¨åˆçº¦ï¼ˆå¯¹å¤–éƒ¨è°ƒç”¨è€…æ¥è¯´ï¼ŒABI é€šå¸¸è¢«ç¼–è¯‘æˆä¸€ä¸ªÂ `JSON`Â æ–‡ä»¶ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒå…¶ä¸­çš„ä¸€éƒ¨åˆ†æ¥è°ƒç”¨ï¼Œåªè¦å®ƒæ»¡è¶³çœŸå®åˆçº¦æ‰€å£°æ˜çš„å‡½æ•°ï¼ˆåŒ…æ‹¬å‚æ•°ï¼Œå‚æ•°ç±»å‹ï¼Œè¿”å›å€¼ï¼Œè¿”å›å€¼ç±»å‹éƒ½ä¸€è‡´ï¼‰åè€…é€šå¸¸è¢«æˆä¸º human-readable ABIï¼Œä¾‹å¦‚ï¼š

```sol
calldatas[0] = abi.encodeWithSignature(
  'execTransfer(uint256,address,address[],uint256[])',
   memberId,
   memberWallet,
   payroll.tokens.addresses,
   payroll.tokens.amounts
);
```

**åˆçº¦äº‹ä»¶**ï¼šç”±äºåˆçº¦çš„å‡½æ•°è°ƒç”¨æ˜¯äº‹åŠ¡æ€§çš„ï¼Œå¹¶ä¸”æ— æ³•ä¸ºå¤–éƒ¨è°ƒç”¨è€…ï¼ˆæŒ‡ä»£ DApp æˆ–é’±åŒ…ç”¨æˆ·ï¼‰æä¾›è¿”å›å€¼ï¼Œåˆçº¦å¼•å…¥äº†äº‹ä»¶çš„æ¦‚å¿µã€‚

äº‹ä»¶é€šè¿‡å‘æ—¥å¿—ç³»ç»Ÿä¸­å†™å…¥ç‰¹å®šæ•°æ®çš„æ–¹å¼æ¥å®ç°å‡½æ•°ä¿®æ”¹çš„è®°å½•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬å’ŒæŸ¥è¯¢çš„æ–¹å¼åˆ—å‡ºä¸€ä¸ªåˆçº¦æ³¨å†Œçš„æ‰€æœ‰äº‹ä»¶ï¼Œå®ç°å¯¹å‡½æ•°å¼‚æ­¥ç»“æœçš„æŸ¥è¯¢å’Œå‰ç«¯ UI çŠ¶æ€å˜æ›´ã€‚åˆçº¦äº‹ä»¶ä»¥æŸä¸ªå•ä¸€åˆçº¦ä¸º key æ¥è¿›è¡Œç´¢å¼•ï¼ŒåŒæ—¶ï¼Œåœ¨å£°æ˜äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸å¤šäºä¸‰ä¸ªÂ `index key`Â æ¥ç¡®ä¿ DApp å‰ç«¯å¯¹è¿™äº›ç´¢å¼• key çš„æŸ¥è¯¢æ•ˆç‡ï¼Œä¾‹å¦‚ï¼š

```sol
event ModuleProposalCreated(
  address indexed module,
  bytes32 indexed id,
  address indexed sender,
  uint256 timestamp
);
```

å¦‚æœä½ æœŸæœ›çš„æŸ¥è¯¢æ˜¯éå¸¸å¤æ‚çš„ï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ—ç›¸å…³è”çš„åˆçº¦äº‹ä»¶ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯é‡‡ç”¨ Relay æä¾›çš„ graph/webhook æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚

**åˆ›å»ºåˆçº¦**ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆçº¦åˆ›å»ºå…¶ä»–åˆçº¦ï¼Œè¿™æ„å‘³ç€ï¼Œåˆçº¦å¯ä»¥æˆä¸ºå…¶ä»–åˆçº¦çš„å·¥å‚åˆçº¦æˆ–è€…ä»£ç†åˆçº¦ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¤–éƒ¨è°ƒç”¨è€…ï¼ˆé’±åŒ…è´¦æˆ·ï¼‰å‘Â `0x00`Â åœ°å€å‘é€åˆçº¦åˆ›å»ºæ“ä½œæ¥æ–°å»ºç½‘ç»œä¸Šçš„åˆçº¦ï¼Œè¿™æ˜¯æˆ‘ä»¬è¿›è¡Œæµ‹è¯•å’Œä¾èµ–å·¥ä½œæµåˆ›å»ºåˆçº¦çš„æ–¹æ³•ã€‚

åˆ›å»ºåˆçº¦éœ€è¦æ¶ˆè€—å¤§é‡ Gas è´¹ç”¨ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç‰¹å®šå·¥å…·åœ¨åˆ›å»ºåˆçº¦å‰é¢„ä¼°å¹¶è®¡ç®—è´¹ç”¨ï¼Œè¿™ä¼šåœ¨å·¥ä½œæµç« èŠ‚ä¸­è¯¦è¿°ã€‚

### 2.3 åˆçº¦ç¼–ç¨‹è¯­è¨€ç‰¹å¾

Sol éœ€è¦ä¾èµ–ç›¸åº”å·¥ä½œæµè¢«ç¼–è¯‘æˆå­—èŠ‚ç å‘å¸ƒåˆ°å¯¹åº”ç¯å¢ƒçš„ç½‘ç»œä¸­æ‰èƒ½è¢«è¿è¡Œï¼Œå› æ­¤ï¼Œå®ƒä¸åƒ JavaScript é‚£æ ·çš„åŠ¨æ€ç±»å‹è¯­è¨€æœ‰éšå¤„å¯è§çš„ runtimeï¼Œç¼–è¯‘å™¨åœ¨æ£€æŸ¥æ—¶ä¼šå¸®åŠ©æˆ‘ä»¬å‘ç°å¤§éƒ¨åˆ†é—®é¢˜ï¼Œå› æ­¤ï¼Œä½ éœ€è¦ä¸€ä¸ª IDEï¼Œä¾‹å¦‚Â [VSCode](https://code.visualstudio.com/)Â ä¹‹ç±»çš„ IDE æˆ–ç¼–è¾‘å™¨æ‰èƒ½è¿›å…¥åˆçº¦å¼€å‘ã€‚

Sol ä¸å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ç±»ä¼¼ï¼Œæ”¯æŒåŸºæœ¬å¤šç§æ•°æ®ç±»å‹ï¼ˆä½†ä¸æ”¯æŒæµ®ç‚¹æ•°ï¼‰ã€å¤æ‚æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚Â `map`ï¼Œ`array`Â å’ŒÂ `struct`ï¼‰ã€åˆçº¦æ”¯æŒç»§æ‰¿å’Œå¤šé‡ç»§æ‰¿ï¼ˆ`is`ï¼‰ã€åŸå‹æ–¹æ³•é‡å†™ï¼ˆ`override`ï¼‰ç­‰ã€‚åˆçº¦æœ‰ç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œåˆçº¦å£°æ˜çš„å‡½æ•°æ”¯æŒä¿®é¥°å™¨è¯­æ³•ã€‚ç‰¹æ®Šåœ°ï¼Œåˆçº¦ä¸­å¯ä»¥é€šè¿‡Â `payable`Â å£°æ˜æˆ–æ˜¾ç¤ºè½¬æ¢æ¥å®ç°å¯¹åŸç”Ÿ Gas token (ETH) çš„èµ„é‡‘æ“ä½œã€‚

Sol è™½ç„¶æ˜¯å›¾çµå®Œå¤‡çš„è¯­è¨€ï¼Œä½†å…¶ä¸­å¤æ‚ç»“æ„çš„æ“ä½œä¼šå¸¦æ¥ç›¸åº”çš„ gas æ¶ˆè€—ï¼Œå› æ­¤ï¼Œåœ¨è®¾è®¡åˆçº¦ä¸­çš„çŠ¶æ€å˜é‡æ—¶ï¼Œåº”å½“è¶³å¤Ÿæ¸…æ™°å’Œç®€å•ã€‚

### 2.4 é˜…è¯»ä¼˜ç§€çš„åˆçº¦ä»£ç 

åˆçº¦ç¼–ç¨‹è™½ç„¶ä¸å¤æ‚ï¼Œä½†å¤§é‡çš„è¿è¡Œæ—¶é™åˆ¶å’Œéå†—ä½™çš„è®¾è®¡ï¼Œå¯¼è‡´æˆ‘ä»¬åœ¨è¿›è¡Œåˆçº¦ç¼–ç æ—¶ï¼Œä¸å¾—ä¸å‚è€ƒè®¸å¤šä¼˜ç§€çš„åˆçº¦ä»£ç ï¼Œæ‰èƒ½ä¿è¯æˆ‘ä»¬çš„åˆçº¦ä»£ç è´¨é‡ã€‚

å¯¹äºè®¸å¤šå…¶ä»–é¢†åŸŸçš„ç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™ä¸€æ­¥æ›´æ˜¯éå¸¸å¿…è¦çš„ã€‚æˆ‘æ¨èå¤§å®¶åœ¨åˆçº¦ç¼–ç çš„è¿‡ç¨‹ä¸­ï¼Œåå¤å‚è€ƒä¼˜ç§€åˆçº¦é¡¹ç›®çš„è®¾è®¡æ€è·¯å’Œç¼–ç æ€ç»´ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä¸ºå¤§å®¶æ¨èä¸€äº›æˆ‘è®¤ä¸ºä¸é”™çš„æ™ºèƒ½åˆçº¦å¼€æºé¡¹ç›®ã€‚

é¦–å…ˆï¼Œ[OpenZeppelin](https://github.com/OpenZeppelin)Â åˆçº¦æ˜¯è¿›å…¥ Web3 é¢†åŸŸå¿…é¡»åå¤çš„é˜…è¯»çš„åœ£ç»ä¹‹ä¸€ï¼Œè‡ª 2017 å¹´ä»¥æ¥ï¼Œä»–ä»¬å®ç°äº†å¤§é‡çš„ EIPï¼ˆä»¥å¤ªåŠæ”¹è¿›ææ¡ˆï¼‰ï¼Œå¹¶æˆä¸ºäº†æ™ºèƒ½åˆçº¦ç¼–ç çš„å®é™…æ ‡å‡†ã€‚è™½ç„¶ï¼ŒOZ çš„åˆçº¦åœ¨ Gas è´¹ç”¨å’Œæ•ˆç‡ä¸Šå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä½†ä»–ä»¬åœ¨å®‰å…¨æ€§ã€ä»£ç å®Œæˆåº¦ã€å¯ç»´æŠ¤æ€§ã€æ³¨é‡Šå’Œæµ‹è¯•æ–¹é¢éƒ½åšçš„å¾ˆå¥½ï¼Œæ˜¯å€¼å¾—ä¿¡èµ–çš„åˆçº¦åŸºç¡€åº“ã€‚æœ€è¿‘ï¼ŒOZ ä¹Ÿå‘å¸ƒäº†ä»–ä»¬åœ¨ StarkNet ä¸Šçš„Â [Cairo è¯­è¨€ç‰ˆæœ¬åˆçº¦](https://github.com/OpenZeppelin/cairo-contracts)ã€‚

[OpenZeppelin/openzeppelin-contracts: OpenZeppelin Contracts is a library for secure smart contract development. (github.com)](https://github.com/OpenZeppelin/openzeppelin-contracts)

[Solmate](https://github.com/Rari-Capital/solmate)Â ä¹Ÿæä¾›äº†ä¸€ç³»åˆ—å¯¹åº”çš„ EIP å®ç°ï¼ŒåŒæ—¶ï¼Œä»–ä»¬æ›´æ³¨é‡åˆçº¦çš„è¿è¡Œæ•ˆç‡ï¼Œä¼˜åŒ–äº†æ‰§è¡Œä¸­çš„ gas è´¹ç”¨ï¼Œå¹¶ä¸”æ¯ä¸ªåˆçº¦ä¾èµ–æ›´å°‘ï¼Œé˜…è¯»èµ·æ¥æ›´åŠ ç®€å•ã€‚

[transmissions11/solmate: Modern, opinionated, and gas optimized building blocks for smart contract development. (github.com)](https://github.com/transmissions11/solmate)

[ERC721A](https://www.erc721a.org/)Â æ˜¯çŸ¥å NFT é¡¹ç›®Â [Azuki](https://www.azuki.com/zh)Â å‘å¸ƒçš„ ERC721 æ”¹å–„ç‰ˆæœ¬ï¼Œé€šè¿‡ç‰¹å®šçš„ä½æ“ä½œï¼Œä»–ä»¬å®ç°äº†å†…å­˜å ç”¨çš„ä¼˜åŒ–ï¼Œå¸¦æ¥äº†æ‰¹é‡ mint ä½ Gas è´¹ç”¨çš„ä¼˜åŠ¿ã€‚å¦‚æœä½ çš„é¡¹ç›®æ¶‰åŠåˆ°å¤§é‡ NFT çš„é“¸é€ ï¼Œå¯ä»¥å‚è€ƒå®ƒçš„åˆçº¦ä»£ç æ¥è¿›è¡Œå®ç°ã€‚

[chiru-labs/ERC721A: https://ERC721A.org (github.com)](https://github.com/chiru-labs/ERC721A)

[Compond](https://compound.finance/)Â æ˜¯ DeFi å€Ÿè´·é¢†åŸŸçš„è€ç‰Œé¡¹ç›®ï¼Œä»£ç è´¨é‡ç»è¿‡å®è·µçš„æ£€éªŒï¼Œå¦‚æœä½ çš„é¡¹ç›®æ¶‰åŠåˆ° DeFi ç›¸å…³çš„éœ€æ±‚ï¼Œè¯·åŠ¡å¿…é˜…è¯»ä»–ä»¬çš„åˆçº¦ä»£ç ã€‚

[compound-finance/compound-protocol: The Compound On-Chain Protocol (github.com)](https://github.com/compound-finance/compound-protocol)

[Uniswap](https://uniswap.org/)Â æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„ DEXï¼Œä»–ä»¬çš„åˆçº¦å®ç°çš„éå¸¸ä¼˜ç§€ï¼Œæ— è®ºä½ æ˜¯å¦æœ‰ DeFi æ–¹é¢çš„éœ€æ±‚ï¼Œæˆ‘éƒ½å»ºè®®ä½ å®Œæ•´é˜…è¯»ä»–ä»¬çš„åˆçº¦ä»£ç ã€‚

[Uniswap/v3-core: ğŸ¦„ ğŸ¦„ ğŸ¦„ Core smart contracts of Uniswap v3 (github.com)](https://github.com/Uniswap/v3-core)

[Lens](https://lens.dev/)Â æ˜¯Â [AAVE](https://aave.com/)Â æ¨å‡ºçš„ä»¥ NFT ä¸ºæ ¸å¿ƒçš„æ–°å‹ç¤¾äº¤åˆçº¦å¼€å‘å¥—ä»¶ï¼ˆæˆ–è€…ä»–ä»¬ç§°ä¹‹ä¸ºç¤¾äº¤åˆçº¦åè®®ï¼‰å¦‚æœä½ çš„é¡¹ç›®è®¾è®¡åˆ° SocialFiï¼Œå¯ä»¥å‚è€ƒä»–ä»¬çš„ä»£ç å®ç°ã€‚

[lens-protocol/core: The Lens Protocol (github.com)](https://github.com/lens-protocol/core)

å…¶æ¬¡ï¼Œæˆ‘æƒ³ç»™å¤§å®¶æ¨èçš„æ˜¯Â [Zora](https://zora.co/)Â v3 ç‰ˆæœ¬åˆçº¦ä¸Â [Gonsis safe](https://gnosis-safe.io/)ï¼Œå‰è€…æ˜¯è‘—åçš„ NFT äº¤æ˜“å¸‚åœºé€€å‡ºçš„äº¤æ˜“åˆçº¦ï¼Œåè€…æ˜¯è‘—åçš„å¤šç­¾åé’±åŒ…åˆçº¦å®ç°ã€‚è¿™äº›éƒ½æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨æ™ºèƒ½åˆçº¦èƒ½å¤Ÿå®Œæˆçš„äº§å“å½“ä¸­éå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼š

[ourzora/v3 (github.com)](https://github.com/ourzora/v3)

[safe-global/safe-contracts: Gnosis Safe allows secure management of blockchain assets. (github.com)](https://github.com/safe-global/safe-contracts)

æœ€åï¼Œå¦‚æœä½ å¯¹ DAO å’Œé“¾ä¸Šæ²»ç†æ„Ÿå…´è¶£ï¼Œæˆ‘æ¨èä½ é˜…è¯»æˆ‘ç¼–å†™çš„Â [CodeforDAO](https://twitter.com/codefordao)Â çš„åˆçº¦ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œå®ç°äº†ä¼ ç»Ÿçš„æ²»ç†æ¨¡å¼ï¼Œå¤šç­¾ç§¯ææ²»ç†ä¸æ¨¡å—åŒ–åˆçº¦ã€‚

[CodeforDAO/contracts: Solidity smart contracts of CodeforDAO (github.com)](https://github.com/CodeforDAO/contracts)

## 3. å¼€å‘å·¥ä½œæµä¸å•å…ƒæµ‹è¯•

å½“æˆ‘ä»¬æŒæ¡ç¼–å†™æ™ºèƒ½åˆçº¦çš„ç¼–ç¨‹è¯­è¨€åï¼Œä¾¿å¯ä»¥å¼€å§‹è¿›è¡Œå·¥ç¨‹ç¼–ç ï¼Œåœ¨è¿™ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä¼šä»‹ç»æµè¡Œçš„ DApp åˆçº¦å¼€å‘å·¥ä½œæµå’Œç¼–å†™å•å…ƒæµ‹è¯•çš„æ–¹æ³•ã€‚

æ™ºèƒ½åˆäºè‡ª 2017 å¹´å‘å±•è‡³ä»Šï¼Œå·²å­˜åœ¨ç›¸å½“å¤šçš„é¡¹ç›®æ”¯æ’‘åˆçº¦å¼€å‘ä¸­çš„å·¥ä½œæµï¼Œå¦‚ä»Šï¼Œå¤§éƒ¨åˆ†é¡¹ç›®ä½¿ç”¨Â [Hardhat](https://hardhat.org/)Â æ¥æ”¯æŒæœ¬åœ°å¼€å‘å·¥ä½œæµã€‚

Hardhat æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼åˆ›å»ºæœ¬åœ° EVM å…¼å®¹åŒºå—é“¾å¼€å‘çš„ç¯å¢ƒï¼Œå¹¶ä¸”æ”¯æŒç›´è§‚çš„ debug æ–¹å¼ï¼Œæ­¤å¤–ï¼Œè¿˜æœ‰ä¸°å¯Œçš„æ’ä»¶ç¤¾åŒºï¼Œå¸®åŠ©å¼€å‘è€…å®Œæˆä¸€ç³»åˆ—ç‰¹å®šçš„éœ€æ±‚ã€‚

ä¾èµ– Hardhatï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°åˆ›å»º block å¿«é€Ÿç¡®è®¤çš„å¼€å‘ç¯å¢ƒï¼Œä½¿ç”¨å…¬å¼€ç§é’¥çš„è°ƒè¯•é’±åŒ…ä½œä¸ºæµ‹è¯•ç”¨æˆ·ï¼Œç¼–è¯‘åˆçº¦å¹¶å‘å¸ƒåˆ°æœ¬åœ°æµ‹è¯•ç½‘ç»œï¼Œç¼–å†™å¹¶åœ¨å†…å­˜ç½‘ç»œä¸­å¿«é€Ÿè¿è¡Œå•å…ƒæµ‹è¯•ï¼Œå¦‚æœä½ æ˜¯ DApp å¼€å‘çš„å…¥é—¨æ–°æ‰‹ï¼Œä½¿ç”¨ Hardhat æ˜¯ä½œä¸ºå·¥ä½œæµæœ€ç®€å•å’Œç›´æ¥çš„æ–¹æ¡ˆã€‚

Hardhat è¿˜æ”¯æŒé…ç½®ä¸åŒçš„åŒºå—é“¾ç½‘ç»œå¹¶é€šè¿‡å·¥ä½œæµéƒ¨ç½²åˆçº¦åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œæˆ–è€…å°†æŸä¸ªé«˜åº¦çš„åŒºå—é“¾ fork åˆ°æœ¬åœ°åˆ›å»ºé›†æˆæµ‹è¯•ç¯å¢ƒã€‚å®ƒæä¾›ä¸°å¯Œé½å…¨çš„æ–‡æ¡£ï¼Œå¯ä»¥åœ¨ä»–ä»¬çš„å®˜ç½‘è¿›è¡Œå‚è€ƒã€‚

### 3.1 æ•´åˆHardhatå·¥ä½œæµ

æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ç®€å•å°† Hardhat æ•´åˆåˆ°ä½ çš„åˆçº¦é¡¹ç›®ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯é‡‡ç”¨Â `npx hardhat`Â å‘å¯¼ï¼Œå®ƒä¼šå¸®åŠ©ä½ åœ¨æœ¬åœ°å»ºç«‹ä¸€ä¸ªç‰¹å®šçš„è„šæ‰‹æ¶é¡¹ç›®å¹¶å®‰è£…å¯¹åº”ä¾èµ–ã€‚

å¦‚æœä½ æ‰“ç®—åœ¨å·²ç»åˆå§‹åŒ–çš„é¡¹ç›®ä¸­å¼•å…¥ hardhat å·¥ä½œæµï¼Œæ‰‹åŠ¨çš„æ–¹å¼æ˜¯æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶Â `hardhat.config.js`Â å¹¶å®‰è£…å¯¹åº”ä¾èµ–Â `npm install --save-dev @nomiclabs/hardhat-waffle ethereum-waffle chai @nomiclabs/hardhat-ethers ethers`

hardhat å·¥ä½œæµéå¸¸ç®€å•ï¼Œæˆ‘ä»¬ä¸éœ€è¦èŠ±å¤ªå¤šæ—¶é—´ç†è§£å®ƒï¼Œå¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œå®ƒå°±åƒæ˜¯æ™ºèƒ½åˆçº¦é¢†åŸŸä¸­çš„ Webpackï¼ˆä½†æ²¡æœ‰ Webpack çš„é…ç½®é‚£ä¹ˆå¤æ‚ï¼‰å®ƒé¢„è®¾äº†ä¸€ç³»åˆ—çš„ taskï¼ˆä»»åŠ¡ï¼‰å¸®åŠ©ä½ å°† Sol æ–‡ä»¶ç¼–è¯‘ä¸ºå­—èŠ‚ç å¹¶è¾“å‡ºå¯¹åº”çš„ ABI åˆ°æœ¬åœ°ï¼Œå½“ç„¶ï¼Œå®ƒä¹Ÿå¸®åŠ©ä½ æ•´åˆå•å…ƒæµ‹è¯•ç¯å¢ƒå¹¶è¿è¡Œæµ‹è¯•ã€‚

**Hardhat ä»»åŠ¡ï¼š**

å¯¹äºä¸€èˆ¬çš„åˆçº¦å¼€å‘è€Œè¨€ï¼Œå¸¸ç”¨çš„ä»»åŠ¡æ˜¯ï¼š

-   `npx hardhat node`Â è¿è¡Œä¸€ä¸ªæœ¬åœ°åŒºå—é“¾èŠ‚ç‚¹å¹¶å°† JSON-RPC endpoint æš´éœ²ç»™å®¢æˆ·ç«¯ã€‚
-   `npx hardhat test`Â è¿è¡Œåˆçº¦çš„å•å…ƒæµ‹è¯•ã€‚
-   `npx hardhat deploy`Â å‘å¸ƒåˆçº¦çš„å­—èŠ‚ç åˆ°æŸä¸ªåŒºå—é“¾ç½‘ç»œï¼Œç½‘ç»œåœ°å€å’Œ deployer è´¦æˆ·ï¼Œè¿™äº›æˆ‘ä»¬å¯ä»¥åœ¨Â `hardhat.config.js`Â æ–‡ä»¶ä¸­é…ç½®ã€‚

**æ•´åˆæ’ä»¶ï¼š**

hardhat å·¥ä½œæµè¿˜æ”¯æŒæ’ä»¶æœºåˆ¶ï¼Œæ’ä»¶èƒ½å¤Ÿå°†ç‰¹å®šé€»è¾‘ä½œä¸º hook function ï¼ˆé’©å­å‡½æ•°ï¼‰æ’å…¥åˆ°å¯¹åº”çš„ taskï¼ˆä»»åŠ¡ï¼‰å½“ä¸­ï¼Œæ‰€ä»¥ï¼Œå½“æˆ‘ä»¬æ‰§è¡ŒæŸä¸ªä»»åŠ¡æ—¶ï¼Œéœ€è¦ç¡®è®¤å®ƒæ˜¯å¦ä¾èµ–äº†æŸä¸ªæ’ä»¶ï¼Œå¦åˆ™å®ƒå¯èƒ½æœ‰ä¸é¢„æœŸä¸åŒçš„è¡Œä¸ºã€‚

å¼•å…¥æ’ä»¶çš„æ–¹å¼æ˜¯ï¼Œé¦–å…ˆä½¿ç”¨ npm å®‰è£…è¿™ä¸ªæ’ä»¶ï¼Œå†äºÂ `hardhat.config.js`Â é…ç½®æ–‡ä»¶å¤´éƒ¨å¼•å…¥å³å¯ã€‚

**HRE è¿è¡Œç¯å¢ƒå˜é‡ï¼š**

å½“æˆ‘ä»¬åœ¨ JS æ–‡ä»¶ä¸­å¼•å…¥ hardhat æ—¶ï¼ŒHRE ä¼šè¢«æ’å…¥è¿è¡Œç¯å¢ƒã€‚ä¸€äº›æ’ä»¶å¯èƒ½ä¼šæ‹“å±• HREï¼Œå°†ä»–ä»¬çš„å®ç”¨å‡½æ•°æ–¹æ³•æ’å…¥åˆ° HRE ä¸­ï¼Œç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ„å»ºç‰¹å®šçš„ hardhat æ’ä»¶ã€‚ä½†ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¸éœ€è¦è¿™ä¹ˆåšã€‚

HRE ä¼šåœ¨æˆ‘ä»¬æ‰§è¡ŒÂ `npx hardhat run`Â ä»»åŠ¡æ—¶è¢«è‡ªåŠ¨æ’å…¥åˆ°å…¨å±€å˜é‡ä¸­å»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•ç¼–å†™æŸäº›ç®€å•çš„åˆçº¦å‘å¸ƒè„šæœ¬æˆ–åˆçº¦äº¤äº’è„šæœ¬ã€‚

### 3.2 å•å…ƒæµ‹è¯•

ç¼–å†™åˆçº¦çš„ç¬¬äºŒæ­¥æ˜¯ç¼–å†™åˆçº¦çš„å•å…ƒæµ‹è¯•ã€‚å½“æˆ‘ä»¬è¿è¡ŒÂ `npx hardhat test`Â ä»»åŠ¡æ—¶ï¼Œhardhat ä¼šè‡ªåŠ¨å¯»æ‰¾Â `./test`Â æ–‡ä»¶å¤¹ä¸‹çš„å•å…ƒæµ‹è¯•å¹¶è¿è¡Œå®ƒä»¬ã€‚è¿™ä¸ªé»˜è®¤çš„åœ°å€å¯ä»¥åœ¨Â `hardhat.config.js`Â é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨Â `path.tests`Â ä¿®æ”¹ï¼š

```
// Rewrite the `./test` folder to `./tests`
paths: {
  tests: './tests',
},
```

è¿è¡Œæµ‹è¯•æ‰€éœ€è¦å®‰è£…çš„ä¾èµ–å¯ä»¥åœ¨è¿™ä¸ªæŒ‡å—ä¸Šæ‰¾åˆ°ï¼š

[Testing with ethers.js & Waffle | Ethereum development environment for professionals by Nomic Foundation (hardhat.org)](https://hardhat.org/hardhat-runner/docs/other-guides/waffle-testing)

ä¸ä¼ ç»Ÿçš„å•å…ƒæµ‹è¯•ä¸€æ ·ï¼Œä½¿ç”¨Â `Mocha`Â ä½œä¸ºå•å…ƒæµ‹è¯•æ¡†æ¶ã€‚å¯¹äºåˆçº¦ç‰¹å®šçš„å˜é‡ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨Â `Waffle`Â å’ŒÂ `chai`Â ä½œä¸ºæ–­è¨€åº“ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨Â `hardhat.config.js`Â é…ç½®æ–‡ä»¶å¤´éƒ¨å¼•å…¥æµ‹è¯•è¾…åŠ©æ’ä»¶Â `@nomiclabs/hardhat-waffle`Â å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ï¼Œè€Œä¸éœ€è¦é¢å¤–æ‰‹åŠ¨å®‰è£… mocha, waffle å’Œ chai å¹¶è¿›è¡Œé…ç½®ï¼Œä¸å‰ä¸€å°èŠ‚æ‰€æåˆ°çš„ HRE ç›¸å…³ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨æ’å…¥ HRE è¿è¡Œç¯å¢ƒã€‚

å…³äºåˆçº¦äº‹ä»¶ï¼Œåˆçº¦æ–¹æ³•è°ƒç”¨ï¼ŒBigNumber ç­‰å®Œæ•´çš„æ–­è¨€åº“èŒƒä¾‹å¯ä»¥åœ¨è¿™ä¸ªæ–‡æ¡£ä¸­æ‰¾åˆ°ï¼š

[Chai matchers â€” waffle documentation (ethereum-waffle.readthedocs.io)](https://ethereum-waffle.readthedocs.io/en/latest/matchers.html)

> æ³¨æ„ï¼šåˆçº¦çš„å•å…ƒæµ‹è¯•ä¸­å¯ä»¥ä½¿ç”¨Â `contractInstance.connect(signer)`Â æ¥éšæ„æ”¹å˜è°ƒç”¨åˆçº¦çš„å¤–éƒ¨è´¦æˆ·ã€‚

### 3.3 æ”¹å–„æµ‹è¯•æ•ˆç‡


ç¼–å†™å•å…ƒæµ‹è¯•é¦–å…ˆéœ€è¦æˆ‘ä»¬åœ¨æµ‹è¯•é’©å­ä¸­ç¼–å†™å‘å¸ƒåˆçº¦çš„ä»£ç ï¼Œè¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡Â `beforeEach`Â é’©å­ä¸­é‡æ–°å‘å¸ƒæˆ‘ä»¬çš„åˆçº¦å¹¶ä½¿å…¶ä»é›¶çŠ¶æ€å¼€å§‹è¿è¡Œã€‚

å³ä½¿ hardhat æ”¯æŒåœ¨å†…å­˜ä¸­è¿è¡ŒåŒºå—é“¾å¹¶æ•´åˆäº†å•å…ƒæµ‹è¯•æµç¨‹ï¼Œä½†è¿™æ ·åå¤çš„å‘å¸ƒåˆçº¦ä¹Ÿä¼šæå¤§æ‹–æ…¢æµ‹è¯•é€Ÿåº¦ã€‚

å› æ­¤ï¼Œå°±å•å…ƒæµ‹è¯•çš„æœ€ä½³å®è·µï¼Œæˆ‘å‘å¤§å®¶æ¨èÂ `hardhat-deploy`Â æ’ä»¶ã€‚

`hardhat-deploy`Â æ’ä»¶æ”¯æŒä½¿ç”¨Â `evm_snapshot`Â å¿«é€Ÿåœ°è·³è½¬åˆ°æŸä¸ªé«˜åº¦çš„åŒºå—é“¾çŠ¶æ€ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒåœ¨å•å…ƒæµ‹è¯•ä¸­ç»´æŠ¤æµ‹è¯•å‰ã€ä¸­ã€åä»¥åŠå„ç§ç‰¹å®šé«˜åº¦çŠ¶æ€ï¼Œæå¤§åœ°åŠ å¿«æµ‹è¯•é€Ÿåº¦ã€‚

[wighawag/hardhat-deploy: hardhat deployment plugin (github.com)](https://github.com/wighawag/hardhat-deploy)

> æ³¨æ„ï¼Œå¼•å…¥Â `hardhat-deploy`Â æ’ä»¶ï¼Œéœ€è¦ä¿®æ”¹å¯¹åº”çš„Â `@nomiclabs/hardhat-ethers`Â æ’ä»¶æ¥æºï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´åœ¨æœªæ¥çš„Â `npm install`Â ä¸­å¸¦æ¥ç‰ˆæœ¬å†²çªï¼Œå¦‚æœä½ é‡åˆ°äº†ç‰ˆæœ¬å†²çªï¼Œå¯ä»¥ä½¿ç”¨Â `npm install --force`Â è·³è¿‡ç‰ˆæœ¬ä¾èµ–æ£€æŸ¥ï¼Œå¼ºåˆ¶å®‰è£…ä¸¤è€…ã€‚

```
"devDependencies": {
    "@nomiclabs/hardhat-ethers": "npm:hardhat-deploy-ethers",
    "hardhat-deploy": "^0.11.2",
    ...
}
```

ç®€å•æ¥è¯´ï¼Œåœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š

```
await deployments.fixture(['SomeContractName']);
```

æ¥ç¡®ä¿åœ¨æµ‹è¯•æ‰§è¡Œå‰è·³å›æŸä¸ªçŠ¶æ€ã€‚å¦‚æœä½ éœ€è¦æ›´åŠ å¤æ‚å’Œè‡ªå®šä¹‰çš„ fixtureï¼ˆè€Œéç›´æ¥è·³å›æŸä¸ªåˆçº¦å‘å¸ƒåçš„å¹²å‡€çŠ¶æ€ï¼‰å¯ä»¥ä½¿ç”¨Â `deployments.createFixture`Â æ¥åˆ›å»ºè‡ªå®šä¹‰ fixtureï¼Œå…·ä½“çš„èŒƒä¾‹ä»£ç å’ŒæŒ‡å—å¯ä»¥åœ¨è¿™é‡Œå¯»æ‰¾åˆ°ï¼š

https://github.com/CodeforDAO/contracts/blob/main/utils/helpers.js#L42

[wighawag/hardhat-deploy: hardhat deployment plugin (github.com)](https://github.com/wighawag/hardhat-deploy#creating-fixtures)

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨Â `hardhat-deploy`Â æ’ä»¶ä¼šåŒæ—¶æ”¹å˜æˆ‘ä»¬å‘å¸ƒåˆçº¦çš„ä»£ç é€»è¾‘ï¼ˆæ­£å¦‚å…¶åï¼‰å®ƒæ”¯æŒåœ¨Â `./deploy`Â æ–‡ä»¶å¤¹ä¸‹ç¼–å†™æ¯ä¸ªåˆçº¦çš„å‘å¸ƒè„šæœ¬ã€‚äº‹å®ä¸Šï¼Œé»˜è®¤çš„Â `deployments.fixture`Â æ­£ä¼šé€€å›è¿™äº›å‘å¸ƒè„šæœ¬æ‰€å™è¿°çš„åˆçº¦çŠ¶æ€ã€‚

ä¸åŒäº hardhat é»˜è®¤çš„å‘å¸ƒè„šæœ¬ï¼ˆä½¿ç”¨Â `npx hardhat run`ï¼‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Â `hardhat-deploy`Â æ’ä»¶æä¾›çš„åŠŸèƒ½åœ¨å‘å¸ƒè„šæœ¬ä¸­åšæ›´å¤šå·¥ä½œï¼Œä¾‹å¦‚ä½¿ç”¨Â `execute`Â å‡½æ•°ç«‹å³ä¿®æ”¹å‘å¸ƒåçš„åˆçº¦çŠ¶æ€ï¼Œè¿™ä¼šåœ¨å¯¹æƒé™æ•æ„Ÿçš„åˆçº¦å½“ä¸­éå¸¸æœ‰ç”¨ï¼š

```
const { deploy, execute } = deployments;
const shareGovernor = await deploy('ShareGovernor', {
    contract: 'TreasuryGovernor',
    from: deployer,
    args: [name + '-ShareGovernor', share.address, treasury.address, settings.share.governor],
    log: true,
  });

  // Setup governor roles
  // Both membership and share governance have PROPOSER_ROLE by default
  await execute(
    'Treasury',
    { from: deployer },
    'grantRole',
    PROPOSER_ROLE,
    membershipGovernor.address
  );
```

é™¤æ­¤ä¹‹å¤–ï¼Œ`hardhat-deploy`Â æ’ä»¶è¿˜æä¾›äº†éå¸¸å¤šçš„ HRE å®ç”¨å‡½æ•°ï¼Œä¾‹å¦‚`getNamedAccounts`Â èƒ½å¸®åŠ©æˆ‘ä»¬å‘½åæœ¬åœ°æµ‹è¯•è´¦æˆ·ï¼Œè€Œéä½¿ç”¨æ•°ç»„ä¸‹æ ‡è®¿é—®å®ƒä»¬ã€‚ä½ å¯ä»¥å‚è€ƒè¯¥æ’ä»¶çš„ GitHub ä¸»é¡µäº†è§£è¿™äº›å®ç”¨åŠŸèƒ½ã€‚

### æµ‹è¯•è¦†ç›–ç‡ä¸gasæŠ¥å‘Š

å½“åˆçº¦çš„å•å…ƒæµ‹è¯•ç¼–ç åˆ°ä¸€å®šç¨‹åº¦ä¹‹åï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›è¿™äº›åˆçº¦è¢«å‘å¸ƒåˆ°æŸä¸ªæµ‹è¯•æˆ–ç”Ÿäº§ç¯å¢ƒï¼ˆä¾‹å¦‚æµ‹è¯•ç½‘ç»œæˆ– ETH ä¸»ç½‘ï¼‰æ—¶æ˜¯å¦æ˜¯å¥å£®å’Œä½æˆæœ¬çš„ï¼Œåœ¨æ­¤æ—¶ï¼Œæˆ‘å‘ä½ æ¨èä¸¤ä¸ª hardhat æ’ä»¶Â `hardhat-gas-reporter`Â ä¸Â `solidity-coverage`

![[e6d4e9d2bd66aaebc21cb7e45742de7.png]]

hardhat-gas-reporter

`hardhat-gas-reporter`Â æ’ä»¶å¸®åŠ©ä½ äº†è§£è¿è¡Œå•å…ƒæµ‹è¯•ä¸­éƒ¨ç½²å’Œæ‰§è¡Œåˆçº¦æ–¹æ³•æ¶ˆè€—çš„ gas è´¹ç”¨ï¼Œå¦‚æœåœ¨æœ¬åœ°ç¯å¢ƒå˜é‡ä¸­æä¾›Â `COINMARKETCAP_API_KEY`ï¼Œå®ƒä¼šè‡ªåŠ¨å°†è¿™äº›æˆæœ¬æŠ˜ç®—ä¸ºç¾å…ƒæˆ–å…¶ä»–æ³•å¸è®¡ä»·ã€‚

[cgewecke/hardhat-gas-reporter: Gas usage per unit test. Average gas usage per method. (eth-gas-reporter for Hardhat) (github.com)](https://github.com/cgewecke/hardhat-gas-reporter)

`solidity-coverage`Â æ’ä»¶æä¾›å•å…ƒæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šï¼Œè¿™æœ‰åŠ©äºå¼€å‘å›¢é˜Ÿç†è§£åˆçº¦æ˜¯å¦å¾—åˆ°äº†åº”æœ‰çš„æµ‹è¯•ã€‚

[sc-forks/solidity-coverage: Code coverage for Solidity smart-contracts (github.com)](https://github.com/sc-forks/solidity-coverage)

### 3.5 å…¶ä»–å®ç”¨æ’ä»¶

å¦‚å‰æ‰€è¿°ï¼Œhardhat å¹¶ä¸éœ€è¦ä»¥æ¥å¤ªå¤šçš„æ’ä»¶å°±å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œæ»¡è¶³å¤§éƒ¨åˆ†åˆçº¦å¼€å‘å›¢é˜Ÿçš„éœ€æ±‚ï¼Œæˆ‘åœ¨è¿™é‡Œæ¨èä¸¤ä¸ªå…¶ä»–çš„ä½¿ç”¨æ’ä»¶ï¼Œä»–ä»¬æ˜¯Â `@nomiclabs/hardhat-etherscan`Â å’ŒÂ `@tenderly/hardhat-tenderly`

è¿™äº›æ’ä»¶éƒ½æ˜¯å¯é€‰çš„ï¼Œå¹¶ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡çš„ API Keyï¼Œå„ä½è¯»è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µé€‰æ‹©æ˜¯å¦ä½¿ç”¨ä»–ä»¬ã€‚

`hardhat-etherscan`Â æ’ä»¶å°† etherscan ç½‘ç«™çš„æºç  verify åŠŸèƒ½æ•´åˆåˆ°å‘å¸ƒå·¥ä½œæµä¸­ï¼Œèƒ½å¤Ÿå°†æ‰€å‘å¸ƒåˆçº¦çš„æºç å’Œ ABI éƒ½å±•ç¤ºåœ¨åˆçº¦åœ°å€é¡µé¢ã€‚

[NomicFoundation/hardhat: Hardhat is a development environment to compile, deploy, test, and debug your Ethereum software. Get Solidity stack traces & console.log. (github.com)](https://github.com/NomicFoundation/hardhat)

`hardhat-tenderly`Â æ’ä»¶æ•´åˆäº† Tenderly å·¥ä½œæµï¼Œåè€…æ˜¯ä¸€ä¸ªæ–°å…´çš„ CI/ç›‘æ§ å¹³å°ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç›‘æ§çº¿ä¸Šåˆçº¦çš„çŠ¶æ€å¹¶æä¾› debug å»ºè®®ã€‚

[Tenderly | Ethereum Developer Platform](https://tenderly.co/)

[Tenderly/hardhat-tenderly: Tenderly plugin for HardHat (github.com)](https://github.com/Tenderly/hardhat-tenderly)

### 3.6 æ›´å¿«çš„å·¥ä½œæµæ–¹æ¡ˆï¼šFoundry

å°½ç®¡åœ¨è¿‡å»çš„ä¸‰å¹´ä¸­ hardhat é€æ¸å„æ–­äº† EVM å…¼å®¹é“¾ä¸­çš„æ™ºèƒ½åˆçº¦å¼€å‘å·¥ä½œæµå¸‚åœºï¼Œä½†æœ€è¿‘ä¹Ÿæœ‰å¾ˆå¤šå¼ºæœ‰åŠ›çš„ç«äº‰è€…å‡ºç°ï¼Œ[Foundry](https://book.getfoundry.sh/index.html)Â å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼š

[Foundry](https://book.getfoundry.sh/index.html)Â ç”± Rust è¯­è¨€ç¼–å†™ï¼Œå¹¶åœ¨å¾ˆå¤šæ–¹é¢æå¤§åœ°æå‡äº†åˆçº¦å•å…ƒæµ‹è¯•çš„è¿è¡Œæ•ˆç‡ï¼š

![[65c3b4f6418a4eb0c67f9facef10ff3.png]]

Foundry ç”±å®ƒçš„å‘½ä»¤è¡Œå·¥å…·Â `Forge`Â ä¸Â `cast`Â ç»„æˆï¼Œå‰è€…å¸®åŠ©æˆ‘ä»¬å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–ç»„ä»¶ï¼ˆä½¿ç”¨ git submodule æ–¹å¼ï¼‰è¿è¡Œæµ‹è¯•ï¼Œå‘å¸ƒåˆçº¦ï¼Œåè€…å¸®åŠ©æˆ‘ä»¬ä¸åˆçº¦è¿›è¡Œ RPC é€šä¿¡äº¤äº’ã€‚

åŒæ—¶ï¼Œå®ƒä¹Ÿæ”¹å˜äº†æˆ‘ä»¬ç¼–å†™æµ‹è¯•çš„æ–¹æ³•ï¼Œè®©å¼€å‘è€…å¯ä»¥ç›´æ¥ç¼–å†™ Sol è€Œä¸å†ä¾èµ– JavaScript å°±å¯ä»¥ç¼–å†™åˆçº¦çš„å•å…ƒæµ‹è¯•ï¼Œæµ‹è¯•æ–‡ä»¶ä¸åˆçº¦æºç åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ç®¡ç†ï¼Œé€šå¸¸ä»¥Â `ContractName.t.Sol`Â ç‰¹æ®Šåç¼€ç»“å°¾ã€‚

å®ƒä¹Ÿæä¾›äº†ä¸€ç³»åˆ—çš„æµ‹è¯•å¥—ä»¶å·¥å…·å¸®åŠ©æˆ‘ä»¬ç¼–å†™åŸºäº Sol çš„å•å…ƒæµ‹è¯•ï¼ŒåŒ…æ‹¬å¯ç»§æ‰¿çš„Â `Test`Â åˆçº¦ï¼Œå’Œä¸€ä¸ªç‰¹æ®Šçš„ï¼Œä¸ vm é€šä¿¡çš„åˆçº¦Â `Cheatcodes`Â å¸®åŠ©æˆ‘ä»¬æ”¹å˜å¤–éƒ¨è°ƒç”¨è€…åœ°å€ï¼Œè¿›è¡Œé”™è¯¯æ–­è¨€ç­‰ç­‰åŠŸèƒ½ã€‚

å¦‚æœä½ å¯¹ Foundry æ„Ÿå…´è¶£ï¼Œæˆ‘æ¨èä½ é˜…è¯»ä»–ä»¬çš„æ–‡æ¡£ï¼Œå®ƒçš„å­¦ä¹ æ›²çº¿å¹¶ä¸é™¡å³­ï¼Œä½†è€ƒè™‘åˆ°ä½¿ç”¨å®ƒä¼šæ”¹å˜ç»å¤§éƒ¨åˆ†æ™ºèƒ½åˆçº¦é¡¹ç›®çš„å¼€å‘æµç¨‹ï¼Œæˆ‘æ¨èä½ åœ¨æœ¬åœ°åˆ†æ”¯ä¸­æ”¯æŒå®ƒå¹¶åŒæ—¶å…¼å®¹ hardhat å·¥ä½œæµã€‚

[Introduction - Foundry Book (getfoundry.sh)](https://book.getfoundry.sh/)

## 4. å‰ç«¯ä¸å®¢æˆ·ç«¯å¼€å‘

ç”±äºç¬¬ä¸‰æ–¹é’±åŒ…è½¯ä»¶çš„ç››è¡Œï¼ŒWeb3 å¤§éƒ¨åˆ†äº§å“ï¼ˆDAppï¼‰çš„ç”¨æˆ·èŠ‚ç›®å®é™…ä¸Šéƒ½ç”±å‰ç«¯ç½‘é¡µæ‰€æ„æˆï¼Œè¿™ä¸ç§»åŠ¨äº’è”ç½‘çš„å¼€å‘æµç¨‹ç›¸æ‚–ï¼Œä½†å¾ˆåƒæ—©æœŸ Web2.0 å†å²å‘å±•è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚

è®¸å¤š DApp å¹¶ä¸æä¾› Mobile App ç‰ˆæœ¬ï¼Œéƒ¨åˆ†åŸå› æ˜¯ç”±äºæ„å»ºä¸€ä¸ªè·¨å¹³å°é’±åŒ…æ–¹æ¡ˆè¿‡äºå¤æ‚ï¼Œä»¥åŠå¤§éƒ¨åˆ† Web3 é¢†åŸŸå†…çš„ç”¨æˆ·éƒ½åœ¨ä½¿ç”¨è¯¸å¦‚ MetaMask è¿™ç±»æµè§ˆå™¨æ’ä»¶é’±åŒ…ï¼Œè€Œå®ƒçš„ç§»åŠ¨ç«¯ App ä½“éªŒå¹¶ä¸å¥½ç”¨ã€‚

æˆ‘ä»¬å½“ç„¶å¯ä»¥ä½¿ç”¨æ‰˜ç®¡é’±åŒ…æœåŠ¡æ¥è¿›è¡Œå¼€å‘ï¼Œè®©æ›´å¤šä¸ç†Ÿæ‚‰ Web3 çš„ç”¨æˆ·ä½¿ç”¨é‚®ç®±æˆ–è€…å¯†ç ç™»å½•ï¼Œä½†è¿™ä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„å®‰å…¨é—®é¢˜ä¸é£é™©ï¼Œå†µä¸”ï¼Œå°±ç®—æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ç®€å•æ˜“ç”¨çš„é’±åŒ…é™ä½ç”¨æˆ·å‡†å…¥é—¨æ§›ï¼Œåœ¨è®¸å¤šå›½å®¶ï¼Œç”¨æˆ·ä»éœ€è¦å¤æ‚çš„ kyc æ‰èƒ½è·å–åˆ°æŸäº› tokenã€‚

æ‰€ä»¥ï¼Œæˆ‘å»ºè®®ä½ ä¹Ÿé‡‡ç”¨ Web å‰ç«¯ä½œä¸ºç¬¬ä¸€ä¸ª DApp çš„ç•Œé¢æ–¹æ¡ˆã€‚

åœ¨æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬æ‰€æ¶‰åŠåˆ°çš„å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯åŸºäºè¿™æ ·çš„å‡è®¾ï¼Œå› æ­¤ï¼Œè¿™éƒ¨åˆ†å†…å®¹éœ€è¦ä½ ç†Ÿæ‚‰ JavaScriptï¼ŒReact.js/Vue.js å’Œå®ƒä»¬ç›¸å…³çš„å·¥ä½œæµã€‚

### 4.1 å‰ç«¯æ¡†æ¶çš„é€‰æ‹©

ä½¿ç”¨ä½•ç§è§†å›¾æ¡†æ¶å¹¶ä¸ä¼šå½±å“ä½ çš„ DApp ä½“éªŒï¼Œä½†æ˜¯ï¼Œè¿™ä¼šå½±å“åˆ°å¼€å‘æ•ˆç‡ã€‚

åœ¨æœ¬æ–‡çš„ç¬¬ä¸€éƒ¨åˆ†ã€Œè®¤è¯† DApp æŠ€æœ¯æ ˆã€æˆ‘ä»¬ä»‹ç»äº†Â [ethers.js](https://docs.ethers.io/v5/)Â å’ŒÂ [web3.js](https://web3js.readthedocs.io/)ï¼Œè¿™ä¸¤è€…éƒ½æ˜¯æ„å»º Web å‰ç«¯çš„åŸºç¡€ç±»åº“ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ ethers.js å…¥é—¨è¿›è¡Œå¼€å‘ã€‚

äº‹å®ä¸Šï¼Œç›¸è¾ƒäº Vue è€Œè¨€ï¼ŒReact çš„ç”Ÿæ€ç³»ç»Ÿä¸­ç›®å‰æ‹¥æœ‰è¾ƒå¤šçš„æ´»è·ƒ Web3 å¼€å‘è€…å’Œç›¸å…³ä¾èµ–åº“ï¼Œå¦‚æœä½ æ²¡æœ‰ç‰¹æ®Šçš„åå¥½ï¼Œå¯ä»¥å°è¯•å…ˆé‡‡ç”¨ React ä½œä¸ºæ¡†æ¶æ¥è¿›è¡Œå¼€å‘ã€‚

å¦å¤–ï¼Œå¤§éƒ¨åˆ†å¯¹äº ethers.js/web3.js çš„åŒ…è£…é¡¹ç›®ï¼Œè¯¸å¦‚Â [web3-react](https://github.com/NoahZinsmeister/web3-react)ï¼Œ[wagmi](https://github.com/tmm/wagmi)Â ç­‰éƒ½ä¾èµ–ä½ ç†è§£ React hooks çš„æ¦‚å¿µï¼Œæ‰€ä»¥åœ¨ä½ ç€æ‰‹è¿›è¡Œç¼–ç ä¹‹å‰ï¼Œéœ€è¦æŸ¥é˜…[å®ƒçš„æ–‡æ¡£](https://zh-hans.reactjs.org/docs/hooks-intro.html)ã€‚

### 4.2 æ­å»ºè„šæ‰‹æ¶é¡¹ç›®

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•è“å›¾å·¥å…·åˆ›å»ºå¯¹åº”çš„è§†å›¾æ¡†æ¶çš„è„šæ‰‹æ¶é¡¹ç›®ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å‚è€ƒç°æœ‰çš„ Web App é¡¹ç›®æ¥è¿›è¡Œå¼€å‘ã€‚

åœ¨ç¼–å†™å‰ç«¯ä»£ç ä¹‹å‰ï¼Œæˆ‘æ¨èä½ å‚è€ƒæµè¡Œçš„è„šæ‰‹æ¶é¡¹ç›®Â [scaffold-eth](https://github.com/scaffold-eth/scaffold-eth)

[scaffold-eth](https://github.com/scaffold-eth/scaffold-eth)Â æ˜¯ä¸€ä¸ªå®Œæ•´çš„åˆçº¦è„šæ‰‹æ¶ï¼Œå®ƒçš„Â `packages/react-app`Â æ–‡ä»¶å¤¹æ˜¯å®ƒçš„ Web å‰ç«¯ä»£ç ï¼Œå¯¹äºç†Ÿç»ƒåˆçº¦å¼€å‘çš„å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œè¿™ä¸ªè„šæ‰‹æ¶çš„ç»„ç»‡æ–¹å¼æœ‰äº›ä¸å¤ªç†æƒ³ï¼Œä½†å¯¹äºåˆšå…¥é—¨ Web3ï¼Œæ‰“ç®—æ­å»ºç¬¬ä¸€ä¸ªæµ‹è¯•é¡¹ç›®çš„æœ‹å‹æ¥è¯´ï¼Œè¿™æ˜¯ä¸ªå¾ˆæ£’çš„å…¥é—¨å·¥å…·ã€‚

[scaffold-eth/scaffold-eth: ğŸ— forkable Ethereum dev stack focused on fast product iterations (github.com)](https://github.com/scaffold-eth/scaffold-eth)

å½“æˆ‘ä»¬å†³å®šäº†ä½¿ç”¨ä½•ç§è§†å›¾æ¡†æ¶æ¥å¼€å‘å‰ç«¯ Web App ä¹‹åï¼Œå°±å¯ä»¥ç€æ‰‹ä½¿ç”¨å®ƒå¯¹åº”çš„è„šæ‰‹æ¶ cli æ¥åˆ›å»ºé¡¹ç›®äº†ã€‚å¯¹äºæ²¡æœ‰ä»»ä½•åå¥½çš„è¯»è€…ï¼Œæˆ‘æ¨èä½ ä½¿ç”¨ React + Next.js æ¥åˆå§‹åŒ–æ–°é¡¹ç›®ï¼ŒNext.js ä½¿ç”¨ React ä½œä¸ºåŸºç¡€è§†å›¾æ¡†æ¶ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„å·¥ä½œæµï¼Œç®€å•çš„è·¯ç”±ç³»ç»Ÿï¼Œå¥½ç”¨çš„ SSR ä¸ FaaS æ”¯æŒï¼Œå½“ç„¶ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨ site builder å·¥å…·ã€‚

[Next.js by Vercel - The React Framework (nextjs.org)](https://nextjs.org/)

### 4.3 å‰ç«¯ä¸åˆçº¦çš„äº¤äº’æµç¨‹

å½“æˆ‘ä»¬åœ¨ DApp çš„ä¸šåŠ¡é€»è¾‘ç¼–ç è¿›è¡Œåˆ°ä¸€å®šç¨‹åº¦åï¼Œéœ€è¦ä¸åˆçº¦ ABI è¿›è¡Œè¯»å†™ï¼Œæˆ–è€…ï¼Œæˆ‘ä»¬éœ€è¦è¿æ¥ç”¨æˆ·çš„é’±åŒ…ï¼Œä¸ºå…¶é“¸é€ ä¸€ä¸ª NFTï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°å‰ç«¯ä¸åˆçº¦çš„äº¤äº’ã€‚

åœ¨æœ¬æ–‡çš„ç¬¬ä¸€ç« èŠ‚ã€Œè®¤è¯† DApp æŠ€æœ¯æ ˆã€ä¸­ï¼Œæˆ‘ä»¬æåˆ°ä¸åŒºå—é“¾ç½‘ç»œè¿›è¡Œäº¤äº’æœ€ç»ˆä¼šä½¿ç”¨Â `Provider/Signer`ï¼ˆå‰ç«¯ï¼‰ +Â `Relay Network`ï¼ˆåŒºå—é“¾ç«¯ï¼‰å› æ­¤ï¼Œè¿™ä¸ªæµç¨‹æœ€ç»ˆä¼šä½¿ç”¨Â [ethers.js](https://docs.ethers.io/v5/)Â æˆ–Â [web3.js](https://web3js.readthedocs.io/)Â å‘é€å¯¹åº”çš„ XHR è¯·æ±‚åˆ° Relay Network çš„ API Endpointã€‚ä½†æ˜¯ï¼Œå…·ä½“è€Œè¨€ï¼Œå¼€å‘è€…å’Œç”¨æˆ·å¦‚ä½•ç†è§£è¿™ä¸€ä¸ä¼—ä¸åŒçš„æµç¨‹å‘¢ï¼Ÿ

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªäº¤äº’æµç¨‹ç®€è¿°ä¸ºï¼š

1.  ç”¨æˆ·æ‰“å¼€ç½‘é¡µï¼Œé»˜è®¤è¿›å…¥åªè¯»æ¨¡å¼ã€‚æˆ‘ä»¬åªèƒ½é€šè¿‡Â `Provider + Relay Network`Â è®¿é—®åˆ°æˆ‘ä»¬æ‰€è®¾å®šçš„é»˜è®¤ç½‘ç»œçš„åˆçº¦çš„Â `view`Â æ–¹æ³•è¿”å›å€¼ã€‚
2.  ç”¨æˆ·ç‚¹å‡»ã€Œè¿æ¥é’±åŒ…ã€æ—¶ï¼Œæˆ‘ä»¬å’Œå¯¹åº”çš„Â `connector`Â è¿›è¡Œé€šä¿¡ï¼Œè·å–è¿æ¥çŠ¶æ€ã€‚å¦‚æœç”¨æˆ·æˆæƒè¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Â `connector`Â è·å–åˆ°ç”¨æˆ·é’±åŒ…çš„åœ°å€ï¼ˆ`0x`ï¼‰åœ¨æ­¤ä¹‹åï¼Œç”¨æˆ·é’±åŒ…çš„Â `Provider`åªè¯»æ¨¡å¼å°†åªæ”¯æŒç”¨æˆ·é’±åŒ…ä¸­é€‰å®šçš„ç½‘ç»œï¼Œå¦‚æœç½‘ç»œä¸ç¬¦åˆæˆ‘ä»¬çš„æœŸæœ›ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Â `connector`Â çš„ç‰¹å®šé€šä¿¡æ¥è¯·æ±‚ç”¨æˆ·ä¿®æ”¹å®ƒã€‚
3.  ç”¨æˆ·ç‚¹å‡»æŸä¸ªè¡¨å•ï¼Œå¸Œæœ›ä¸åˆçº¦çš„å†™æ“ä½œå‡½æ•°è¿›è¡Œäº¤äº’ã€‚æ­¤æ—¶ï¼ŒÂ [ethers.js](https://docs.ethers.io/v5/)Â æˆ–Â [web3.js](https://web3js.readthedocs.io/)Â ä¼šå°†äº¤æ˜“ä¿¡æ¯æ‰“åŒ…å‘ç»™Â `connector`ï¼Œåè€…å°†å¼•å¯¼ç”¨æˆ·è¿›è¡Œç­¾åå’Œç¡®è®¤äº¤æ˜“çš„æ“ä½œã€‚å¦‚æœäº¤æ˜“æˆåŠŸæäº¤åˆ°åŒºå—é“¾ç½‘ç»œï¼ˆç»ç”±æˆ‘ä»¬é…ç½®çš„Â `Relay Network`ï¼‰æˆ‘ä»¬éœ€è¦ç›‘å¬è¯¥äº¤æ˜“çš„çŠ¶æ€å’Œåˆçº¦äº‹ä»¶ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥å‰ç«¯çŠ¶æ€æ›´æ–°ã€‚
4.  ç”¨æˆ·è¿›è¡Œé’±åŒ…ç™»å½•æ“ä½œæˆ–å…¶ä»–ç­¾åæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¸åˆçº¦é€šä¿¡ä»…åœ¨æœ¬åœ°è¯·æ±‚Â `connector`æ¥å‘è¡Œä½¿ç”¨ç”¨æˆ·é’±åŒ…ç§é’¥ç­¾ååçš„åŠ å¯†æ•°æ®ã€‚

åœ¨è¿›è¡Œä»¥ä¸Šæ‰€è¿°çš„æµç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å›é¡¾ ã€Œè®¤è¯† DApp æŠ€æœ¯æ ˆã€ä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”å‡†å¤‡å¥½Â `Relay Network`çš„ access keyï¼Œæ— è®ºæ“ä½œæ˜¯è¯»æˆ–è€…å†™ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å‡†å¤‡è¿™äº› access key æ‰èƒ½ä¸ºç”¨æˆ·æä¾›é«˜è´¨é‡å’Œç¨³å®šçš„è¯·æ±‚è®¿é—®ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡æä¾›å¤šä¸ª Provider å®ä½“çš„æ–¹å¼æ¥è®¿é—®å¤šä¸ªåŒºå—é“¾ç½‘ç»œçš„åˆçº¦ ABIï¼Œä½†ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬åªèƒ½ä¾èµ–Â `connector`ä¸­ç”¨æˆ·é€‰å®šçš„ç½‘ç»œæ¥è¿›è¡Œå†™æ“ä½œã€‚

å¯¹äºåˆçº¦å¤šä¸ª ABI çš„å†™æ“ä½œå¯ä»¥åˆå¹¶è¯·æ±‚ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç”¨æˆ·åœ¨è¿›è¡Œæ“ä½œæ—¶çš„ Gas è´¹ç”¨ï¼Œå¦‚æœä½ æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œå¯ä»¥å‚è€ƒ Multicall.js çš„å®ç°ï¼š

[makerdao/multicall.js: Multicall.js: A JavaScript blockchain state management library for dapps (github.com)](https://github.com/makerdao/multicall.js)

### 4.4 å‰ç«¯ä¾èµ–

å¤§é‡çš„é‡å¤å·¥ä½œéƒ½å»ºç«‹åœ¨ä¼˜ç§€çš„å¼€æºé¡¹ç›®åŸºç¡€ä¸Šï¼Œåœ¨ DApp ç¼–å†™è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ¨èä½ ä½¿ç”¨ä¸€äº›ä¼˜ç§€çš„å‰ç«¯åº“æ¥å‡å°‘å·¥ä½œé‡ï¼Œå¹¶å®ç°æ›´å¥½çš„ä»£ç äº¤ä»˜è´¨é‡ã€‚

wagmi æ˜¯æˆ‘æ¨èçš„æ ¸å¿ƒä¾èµ–ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„ React hooks æ¥å®Œæˆ DApp Web å‰ç«¯ä¸åˆçº¦äº¤äº’çš„æ‰€æœ‰æµç¨‹ã€‚å®ƒçš„å®ç°ç®€å•ï¼Œæµ‹è¯•å¥å…¨ï¼Œè€Œä¸”æ²¡æœ‰å¤šä½™çš„å†—ä½™ä¾èµ–åº“ã€‚

[wagmi-dev/wagmi: React Hooks for Ethereum (github.com)](https://github.com/wagmi-dev/wagmi)

è°ˆåˆ° React hooksï¼Œæˆ‘ä¹Ÿæ¨è useDAppï¼Œç›¸æ¯”äº wagmiï¼Œå®ƒæ›´åŠ å¤æ‚ï¼Œä½†é»˜è®¤æ”¯æŒ multicall.js

[TrueFiEng/useDApp: Framework for rapid Dapp development. Simple. Robust. Extendable. Testable (github.com)](https://github.com/TrueFiEng/useDApp)

å¦‚æœä½ çš„ç½‘ç«™å°†è¦é›†æˆé’±åŒ…ç™»å½•çš„åŠŸèƒ½ï¼Œé‚£ä½ åˆ™éœ€è¦è€ƒè™‘å¼•å…¥ Siweï¼ˆSign-In with Ethereumï¼‰å®ƒå®ç°äº† EIP-4361 ä¸­çš„é’±åŒ…ç™»å½•æµç¨‹ã€‚

[spruceid/siwe: Sign-In with Ethereum library (github.com)](https://github.com/spruceid/siwe)

å¦‚æœä½ çš„ Next.js DApp è®¡åˆ’æä¾›å¤šè¯­è¨€ç‰ˆæœ¬å’Œæ£€æµ‹ï¼Œæˆ‘æ¨èä½ ä½¿ç”¨Â `i18next`Â ä¸Â `react-i18next`Â ä¸Â `i18next-browser-languagedetector`Â è¿™äº›ä¾èµ–ä¸ DApp çš„æ ¸å¿ƒäº¤äº’é€»è¾‘æ²¡æœ‰å…³ç³»ï¼Œå› æ­¤ä¸å†èµ˜è¿°ã€‚

åœ¨ UI åº“æ–¹é¢ï¼Œæˆ‘æ¨èåŸºäº Google Materials UI è®¾è®¡ç³»ç»Ÿçš„ MUI ä¸ NextUIï¼š

[MUI: The React component library you always wanted](https://mui.com/zh/)

[NextUI - Beautiful, fast and modern React UI Library](https://nextui.org/)

### 4.5 å®¢æˆ·ç«¯å¼€å‘

å®¢æˆ·ç«¯å¼€å‘çš„æ–¹æ¡ˆæ¯”è¾ƒå¤šæ ·ï¼Œæµè¡Œçš„æ–¹æ¡ˆæ˜¯ React Nativeï¼ˆè·¨å¹³å°ï¼‰Flutterï¼ˆè·¨å¹³å°ï¼‰Swiftï¼ˆiOSï¼‰å’Œ Java (Android) è¿™äº›æ–¹æ¡ˆéƒ½æœ‰ä¸€äº›æµè¡Œçš„ä¾èµ–åº“å¯ä»¥å€Ÿé‰´ã€‚

è€ƒè™‘åˆ° React Nativeï¼ˆè·¨å¹³å°ï¼‰çš„å®ç°ï¼Œå®ƒçš„ä¾èµ–åº“ä¸ React åº”å½“å¹¶æ— å·®å¼‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šè¿°é’ˆå¯¹ React çš„æ–¹æ¡ˆã€‚

å¯¹äº Flutterï¼ˆè·¨å¹³å°ï¼‰ è€Œè¨€ï¼Œæˆ‘æ¨èä½ å‚è€ƒè¿™ä¸€å®˜æ–¹æŒ‡å—ï¼š

[Ethereum for Dart developers | ethereum.org](https://ethereum.org/en/developers/docs/programming-languages/dart/)

å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ web3dart æ¥ä¸åŒºå—é“¾ Relay è¿›è¡Œé€šä¿¡ï¼š

[web3dart | Dart Package (pub.dev)](https://pub.dev/packages/web3dart)

å¯¹äº Swiftï¼ˆiOSï¼‰è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Argent labs å›¢é˜Ÿæä¾›çš„Â [web3.swift](https://github.com/argentlabs/web3.swift)Â æ–¹æ¡ˆï¼š

[argentlabs/web3.swift: Ethereum Swift API with support for smart contracts, ENS & ERC20 (github.com)](https://github.com/argentlabs/web3.swift)

å¯¹äº Java (Android) è€Œè¨€ï¼Œæµè¡Œçš„æ–¹æ¡ˆä¹‹ä¸€æ˜¯ Web3jï¼š

[web3j/web3j: Lightweight Java and Android library for integration with Ethereum clients (github.com)](https://github.com/web3j/web3j)

## 5. å¼€å‘ã€æµ‹è¯•ä¸ç”Ÿäº§ç¯å¢ƒè°ƒè¯•

ä¸å…¶ä»–è½¯ä»¶ä¸€æ ·ï¼ŒDApp åœ¨æ­£å¼ä¸Šçº¿è¿‡ç¨‹å‰ä¹Ÿä¼šç»è¿‡å‡ ä¸ªç¯èŠ‚çš„è°ƒè¯•ä¸æµ‹è¯•è¿‡ç¨‹ã€‚ä¸å…¶ä»–è½¯ä»¶ä¸åŒçš„æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æ— æ³•ç®€å•åœ°åœ¨æœ¬åœ°æ­å»ºæ‰€æœ‰æµ‹è¯•ç¯å¢ƒã€‚

### 5.1 å¼€å‘ç¯å¢ƒè°ƒè¯•

åœ¨ã€Œå¼€å‘å·¥ä½œæµä¸å•å…ƒæµ‹è¯•ã€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æåˆ°ä½¿ç”¨Â `hardhat node`Â èƒ½å¤Ÿå¿«é€Ÿåœ¨æœ¬åœ°è¿è¡Œä¸€ä¸ªè‡ªåŠ¨ mining çš„åŒºå—é“¾è°ƒè¯•ç½‘ç»œã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•å°†æ¯æ¬¡ä¿®æ”¹çš„åˆçº¦ ABI åŒæ­¥ç»™å‰ç«¯é¡¹ç›®å‘¢ï¼Ÿ

é»˜è®¤åœ°ï¼Œhardhat ä¼šå°†ç¼–è¯‘åçš„ ABI æ–‡ä»¶å’Œåˆçº¦å­—èŠ‚ç æ”¾åœ¨Â `./artifacts`Â æ–‡ä»¶å¤¹ï¼Œä½†ä¸åŒ…æ‹¬åˆçº¦åœ°å€ï¼Œæ–‡ä»¶ç»„ç»‡æ–¹å¼å¯¹å‰ç«¯é¡¹ç›®ä¹Ÿå¹¶ä¸å‹å¥½ã€‚

å€ŸåŠ©Â `hardhat-deploy`Â æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨Â `--export-all`Â å¯¼å‡ºæ‰€æœ‰è¢«å‘å¸ƒçš„åˆçº¦ ABIï¼ˆåŒ…å«åœ°å€ä¿¡æ¯ï¼‰ä¸ºä¸€ä¸ªå®Œæ•´çš„ json æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š

```
npx hardhat node --export-all ../website/contracts/localhost.json
```

è¿™ä¸ª json æ–‡ä»¶çš„ç»“æ„çœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š

```
{
  "31337": [
    {
      "name": "localhost",
      "chainId": "31337",
      "contracts": {
         "Membership": { address: "...", abi: [...] }
         ...
    }
  ]
}
```

å¯ä»¥çœ‹å‡ºï¼Œå®ƒæ˜¯ä¸€ä¸ªç”± Chain IDï¼ˆ31337 æ˜¯ hardhat Chain IDï¼‰ç´¢å¼•çš„åˆçº¦ ABI æ¸…å•ï¼Œæ ¹æ®è¿™ä¸ªæ¸…å•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ„å»ºå‡ºå¯¹åº”çš„åˆçº¦å®ä¾‹å¹¶ä¸æœ¬åœ°åˆçº¦è¿›è¡Œäº¤äº’ã€‚

> æ³¨æ„ï¼šå‰ç«¯é¡¹ç›®ä¸æœ¬åœ°åˆçº¦è¿›è¡Œè°ƒè¯•æ—¶ï¼Œè¯·ç‰¹åˆ«æ³¨æ„Â `Provider/Signer`Â å½“å‰è¿æ¥çš„ç½‘ç»œã€‚å¦å¤–ï¼Œé»˜è®¤åœ°ï¼Œhardhat ç½‘ç»œçš„åŒºå—ç¡®è®¤æ˜¯å³æ—¶çš„ï¼Œå¦‚æœä½ éœ€è¦æ¨¡ä»¿å…¬å¼€ç½‘ç»œçš„è¡Œä¸ºï¼Œå¯ä»¥åœ¨è¿™é‡Œå¯»æ‰¾åˆ°[ä¿®æ”¹å®ƒçš„é…ç½®](https://hardhat.org/hardhat-network/explanation/mining-modes.html)ã€‚

### 5.2 æµ‹è¯•ä¸ç”Ÿäº§ç¯å¢ƒè°ƒè¯•

å½“æˆ‘ä»¬çš„åˆçº¦å‡†å¤‡å‘å¸ƒåˆ°å…¬å¼€æµ‹è¯•ç½‘ç»œï¼Œä¾‹å¦‚ Rinkeby, Kovan, Ropsten æˆ–è€… Goerli æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ hardhat deploy ä¸­æŒ‡å®šå¯¹åº”çš„ network é€‰é¡¹å³å¯:

```
npx hardhat deploy --network rinkeby
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å¯¹åº”çš„ deployer é’±åŒ…è´¦æˆ·ä¸­æœ‰è¶³å¤Ÿçš„ Gas Token ä½™é¢ï¼Œå¯¹äºä¸Šè¿°ç½‘ç»œæ¥è¯´ï¼Œå³æ˜¯ ETH ä½™é¢ã€‚

åˆçº¦ä¸€æ—¦å‘å¸ƒåˆ°å…¬å¼€ç½‘ç»œï¼Œå®ƒçš„çŠ¶æ€å°±ä¸å—åˆ°æˆ‘ä»¬çš„æ§åˆ¶ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥æ ¹æ®æˆ‘ä»¬æä¾›çš„ ABI ä¿®æ”¹æŸä¸ªåˆçº¦çš„çŠ¶æ€ï¼Œå› æ­¤ï¼Œå¦‚æœä½ éœ€è¦ç¨³å®šçš„ï¼ŒæŸç§çŠ¶æ€çš„æµ‹è¯•åˆçº¦å……å½“ä¸åŒç‰ˆæœ¬çš„æµ‹è¯•ç¯å¢ƒï¼Œç¡®ä¿ä½ åœ¨å‘å¸ƒä¹‹å‰ä½¿ç”¨äº†ç‰¹æ®Šçš„æƒé™ç®¡ç†æˆ–æ˜¯åœ°å€ç¡¬ç¼–ç ã€‚

å¦‚æœä½ ä¸æƒ³å¦‚æ­¤éº»çƒ¦åœ°ç®¡ç†æµ‹è¯•ç½‘ç»œï¼Œæˆ‘æ¨èä½ ä½¿ç”¨Â `hardhat node --fork URI`Â åŠŸèƒ½åœ¨æœ¬åœ°è®¡ç®—æœºæˆ–è€…æœåŠ¡å™¨é›†ç¾¤ä¸­ fork ä¸»ç½‘çŠ¶æ€å……å½“æµ‹è¯•ç¯å¢ƒã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒçš„[è¯¦ç»†æŒ‡å—](https://hardhat.org/hardhat-network/guides/mainnet-forking.html)ã€‚

å…¬å¼€æµ‹è¯•ç¯å¢ƒä¸­çš„ç¬¬ä¸‰æ–¹åˆçº¦çŠ¶æ€æ˜¯æœªå¯çŸ¥çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å†ä¸‰ç¡®è®¤è°ƒç”¨çš„åœ°å€æ˜¯å¦æ­£ç¡®ã€‚å…¶æ¬¡ï¼Œå¤§éƒ¨åˆ†æµè¡Œçš„åè®®æˆ–è€… DEX åœ¨å‡ å¤§å…¬å¼€æµ‹è¯•ç½‘ç»œéƒ½æä¾›äº†æµ‹è¯•åˆçº¦ï¼ŒåŒ…æ‹¬ OpenSea åœ¨å†…ï¼Œéƒ¨åˆ†æµè¡Œçš„ DApp å‰ç«¯ä¹Ÿæä¾›äº†æµ‹è¯•ç½‘ç»œçš„ç‰ˆæœ¬ï¼Œä»¥å¸®åŠ©å¼€å‘è€…åœ¨å‘å¸ƒåˆ°çº¿ä¸Šç½‘ç»œå‰å‘ç°é—®é¢˜ï¼š

[OpenSea, the largest NFT marketplace](https://testnets.opensea.io/)

æ­¤å¤–ï¼Œä½ éœ€è¦ä¸€äº›æµ‹è¯• ETH æ‰èƒ½ç¡®ä¿å…¬å¼€æµ‹è¯•ç½‘ç»œä¸­åˆçº¦ä¸é€»è¾‘æ­£å¸¸å·¥ä½œï¼ŒåŒæ—¶ï¼Œä½ çš„ç”¨æˆ·ä¹Ÿä¼šéœ€è¦å®ƒä»¬ã€‚è¿™é‡Œæ˜¯ä¸€äº›å¯ä»¥è·å¾—æµ‹è¯• ETH çš„ç½‘ç«™å’ŒæœåŠ¡ï¼š

[Paradigm MultiFaucet | Bootstrap your testnet wallet](https://faucet.paradigm.xyz/)

[A Complete Guide to Ethereum's Rinkeby Testnet (alchemy.com)](https://www.alchemy.com/overviews/rinkeby-testnet)

## 6. æœåŠ¡ç«¯ç¼–ç ä¸é›†æˆ

æœåŠ¡ç«¯ä¸€ç›´æ˜¯ DApp è¢«è®¤ä¸ºæ²¡é‚£ä¹ˆã€Œå»ä¸­å¿ƒåŒ–ã€çš„åŸå› ä¹‹ä¸€ã€‚å°±æˆ‘æ‰€çŸ¥ï¼Œä¸–ç•Œä¸Šç»å¤§å¤šæ•° DApp éƒ½æœ‰æœåŠ¡ç«¯ API æä¾›æ”¯æŒï¼Œåªæœ‰å°‘æ•°ç±»ä¼¼Â [Uniswap](https://app.uniswap.org/)Â è¿™æ ·çš„äº§å“ï¼Œä»…ä¾èµ–å‰ç«¯ä¸åˆçº¦è¿›è¡Œé€šä¿¡ã€‚

ä½†ç»å¤§å¤šæ•° DApp çš„ Web UI å®ç°äº†å»ä¸­å¿ƒåŒ–ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†æœåŠ¡ç«¯ API åœ¨ DApp å¼€å‘ä¸­æ‰€å±çš„åœ°ä½ï¼Œä¸èƒ½å°†æ ¸å¿ƒé€»è¾‘æ”¾åœ¨ç§æœ‰æœåŠ¡å™¨ä¸­ä¾èµ–ï¼Œæˆ–è€…ä¸€å‘³ä½¿ç”¨æœåŠ¡ç«¯å‚¨å­˜çš„æœºå™¨äººé’±åŒ…ç§é’¥æ¥æ“ä½œåŒºå—é“¾ã€‚

æˆ‘ä»¬éœ€è¦ç¼–å†™æœåŠ¡ç«¯ API çš„åŸå› ä¹‹ä¸€æ˜¯ï¼Œé“¾ä¸ŠçŠ¶æ€å‚¨å­˜çš„æˆæœ¬è¿‡é«˜ï¼Œä»¥åŠåå¤åœ°ç­¾åä¸äº¤äº’å¯¹ç”¨æˆ·æ¥è¯´ä½“éªŒä¸ä½³ã€‚å¦å¤–ä¸€äº›åŸå› æ˜¯ï¼Œä¸€äº›ä¸é‡è¦çš„ï¼Œå¯ä»¥è¢«ä¸¢å¼ƒçš„æ•°æ®å¹¶ä¸éœ€è¦æ”¾åœ¨åˆçº¦ä¸­å‚¨å­˜ã€‚

DApp çš„æœåŠ¡ç«¯ API å¹¶ä¸è¦æ±‚ç‰¹æ®Šé…ç½®ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€è¿è¡Œç¯å¢ƒæ¥ç¼–å†™å®ƒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨ Nodeï¼Œå› ä¸ºè¿™æ ·å¯ä»¥å¤ç”¨ä¸€éƒ¨åˆ†Â `Provider/Signer`Â çš„å‰ç«¯ä¸šåŠ¡é€»è¾‘ã€‚

### 6.1 å¼€å‘ç¯å¢ƒ

å¦‚æœä½ çš„ DApp å¹¶ä¸å¤æ‚ï¼Œä¸éœ€è¦å‚¨å­˜å¤ªå¤šçŠ¶æ€ï¼Œæˆ‘æ¨èä½ ä½¿ç”¨ä¸Šè¿°ç« èŠ‚æåˆ°çš„ Next.js æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ç›´æ¥è¢« push åˆ°Â [Vercel](https://vercel.com/)ï¼Œåè€…å°†èƒ½å¤Ÿè‡ªåŠ¨åœ°å°†ä½  Next.js é¡¹ç›®ä¸­çš„ API éƒ¨ç½²åˆ°å¯¹åº”çš„æœåŠ¡ç¯å¢ƒã€‚

å¦‚æœä½ çš„ DApp ä¾èµ–è¾ƒå¤šçš„æ•°æ®åº“å’ŒæœåŠ¡ï¼Œæˆ‘æ¨èä½ ä½¿ç”¨ FaaSï¼Œæˆ‘å¸¸ç”¨çš„ä¸€ä¸ª FaaS æœåŠ¡æ˜¯ Firebaseï¼Œä½ å¯ä»¥ä½¿ç”¨ Firebase å¿«é€Ÿè¿æ¥å®æ—¶æ•°æ®åº“ï¼Œæ•´åˆ Twitter æˆ– GitHub çš„ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œå®ƒè¿˜æä¾›éå¸¸å¥½ç”¨çš„æœ¬åœ°æ¨¡æ‹Ÿå™¨å·¥å…·å¥—ä»¶ï¼Œä»¥åŠï¼Œå®ƒèƒ½å¤Ÿéå¸¸å¥½åœ°æ”¯æŒè·¨å¹³å°ã€‚

[å°† Firebase æ·»åŠ åˆ°æ‚¨çš„ JavaScript é¡¹ç›® (google.com)](https://firebase.google.com/docs/web/setup?hl=zh-cn)

æœåŠ¡ç«¯ç¼–ç æ²¡æœ‰å¤ªå¤šä¸ DApp å¼€å‘ç›¸å…³çš„å†…å®¹ï¼Œä½†å…¶ä¸­æœ‰ä¸¤ä¸ªæˆ‘ä»¬éœ€è¦æåŠçš„éƒ¨åˆ†ï¼š

1.  ç†è§£ä½¿ç”¨ Siwe è¿›è¡Œé’±åŒ…ç™»å½•çš„æµç¨‹
2.  åœ¨æœåŠ¡ç«¯ä½¿ç”¨Â `Provider/Signer`Â ä¸åŒºå—é“¾ Relay è¿›è¡Œé€šä¿¡

æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šç®€å•ä»‹ç»è¿™ä¸¤éƒ¨åˆ†å†…å®¹ã€‚

### 6.2 å…³äºé’±åŒ…ç™»å½•

è®¸å¤šåˆšå…¥é—¨ Web3 çš„å¼€å‘è€…ä¼šè®¤ä¸ºï¼Œé’±åŒ…ç™»å½•åªéœ€è¦ä½¿ç”¨å‰ç«¯è„šæœ¬è¿æ¥é’±åŒ…å³å¯ï¼Œä½†è¿™ç§é€»è¾‘å¾ˆå®¹æ˜“è¢« hackï¼Œå› ä¸ºä»»ä½•å®¢æˆ·ç«¯çŠ¶æ€éƒ½èƒ½å¤Ÿè¢«ä½æˆæœ¬ä¿®æ”¹ã€‚

Siweï¼ˆ[Sign-In with Ethereum](https://docs.login.xyz/general-information/siwe-overview/eip-4361)ï¼‰å°†Â `EIP-4361`Â è‰æ¡ˆå¼•å…¥äº†ä»¥å¤ªåŠæ”¹è¿›åè®®ï¼Œç›®çš„æ˜¯æ ‡å‡†åŒ–å¼€å‘è€…ä½¿ç”¨é’±åŒ…ç™»å½•æˆæƒ Off-chain äº§å“çš„é€»è¾‘ã€‚å®ƒçš„æµç¨‹ä¸Â [JWT](https://jwt.io/)Â çš„å‘è¡Œç›¸ä¼¼ã€‚

Siwe æ”¯æŒç»å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€å’Œå®ƒä»¬çš„è¿è¡Œç¯å¢ƒï¼ˆJavaScript, Rust, Python, Golang, Ruby ç­‰ï¼‰å› æ­¤ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ä¾èµ–åº“æ¥å®Œæˆå¤§éƒ¨åˆ†æµç¨‹ã€‚å¦‚æœä½ ä½¿ç”¨ Next.js ä¹Ÿå¯ä»¥é‡‡ç”¨Â [NextAuth](https://next-auth.js.org/)Â æ¥å¿«é€Ÿæ•´åˆå®ƒã€‚

ç®€å•æ¥è¯´ï¼ŒSiwe é€šè¿‡å¯¹æœåŠ¡ç«¯å‘è¡Œçš„éšæœºÂ `nonce`Â å’Œå…¶ä»–æ ‡å‡†è¾“å…¥è¿›è¡Œç­¾åï¼Œå†é€šè¿‡æœåŠ¡ç«¯éªŒè¯ç­¾åå†…å®¹çš„æ–¹å¼æ¥ç¡®è®¤æäº¤æ–¹çš„åœ°å€ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸¤ä¸ª API æ¥å®ç° Siweï¼Œåˆ†åˆ«æ˜¯Â `/nonce`Â å’ŒÂ `/vertify`Â ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒä»¬çš„ä»£ç èŒƒä¾‹ï¼š

[spruceid/siwe-quickstart (github.com)](https://github.com/spruceid/siwe-quickstart)

### 6.3 æœåŠ¡ç«¯ä¸åŒºå—é“¾çš„é€šä¿¡

åœ¨æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡ç«¯è¿›è¡Œä¸åŒºå—é“¾ Relay Network çš„é€šä¿¡ï¼Œå¦‚æœä½ ä½¿ç”¨ Node ä½œä¸ºè¿è¡Œç¯å¢ƒï¼Œå®ƒçš„é€»è¾‘ä»£ç å’Œå‰ç«¯æ˜¯ä¸€è‡´çš„ã€‚

å¦‚æœæœåŠ¡ç«¯åªéœ€è¦ä½¿ç”¨åˆ° Provider ä¸ Relay Network é€šä¿¡ï¼ˆåªè¯»æ¨¡å¼ï¼‰ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬é€šè¿‡æ•´åˆåŒºå—é«˜åº¦ï¼ŒæŸä¸ªåˆçº¦çŠ¶æ€å’Œè®¢é˜…äº‹ä»¶ï¼Œæ¥ç»„å»ºæˆ‘ä»¬è‡ªå·±çš„æ•°æ®ç¼“å­˜æœåŠ¡å¹¶æä¾› APIï¼Œé‚£æˆ‘ä»¬åªéœ€è¦æŒ‰ç…§å‰ç«¯çš„æ–¹å¼ä¸ Relay Network å»ºç«‹é€šä¿¡å³å¯ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ access key å­˜æ”¾åœ¨ç”Ÿäº§ç¯å¢ƒçš„ç¯å¢ƒå˜é‡ä¸­ï¼Œæˆ‘æ¨èä½ ä½¿ç”¨Â [dotenv](https://github.com/motdotla/dotenv)Â å»å¤„ç†å®ƒä»¬ã€‚

[motdotla/dotenv: Loads environment variables from .env for nodejs projects. (github.com)](https://github.com/motdotla/dotenv)

å¦‚æœä½ ä½¿ç”¨ Next.js å®ƒä¼šè‡ªåŠ¨è¯»å– dotenv çš„ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œå› æ­¤ä½ å¯ä»¥åœ¨Â `process.env`Â ä¸­å¿«é€Ÿä½¿ç”¨åˆ°å®ƒä»¬ã€‚è¿™é‡Œæ˜¯ Next.js çš„[ç›¸å…³æ–‡æ¡£](https://nextjs.org/docs/basic-features/environment-variables#environment-variable-load-order)ã€‚å¦‚æœä½ ä½¿ç”¨å…¶ä»–æœåŠ¡ç«¯æ¡†æ¶æˆ– FaaSï¼Œä½ å¯ä»¥è‡ªå·±ç»´æŠ¤è¿™äº›ç¯å¢ƒå˜é‡æ–‡ä»¶ã€‚

å¦‚æœæœåŠ¡ç«¯éœ€è¦ä½¿ç”¨åˆ° Provider å’Œ Signer ä¸ Relay Network è¿›è¡Œé€šä¿¡ï¼ˆè¯»å†™æ¨¡å¼ï¼‰æˆ‘ä»¬å°±éœ€è¦å¥½å¥½è€ƒè™‘å¦‚ä½•å­˜æ”¾æœºå™¨äººé’±åŒ…çš„å¯†é’¥çš„é—®é¢˜ã€‚

> æ³¨æ„ï¼šåœ¨åšè¿™äº›äº‹æƒ…ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥æå‰æ€è€ƒä¸ºä½•éœ€è¦åœ¨æœåŠ¡ç«¯ä½¿ç”¨æœºå™¨äººé’±åŒ…å¯¹æŸäº›åˆçº¦è¿›è¡Œå†™æ“ä½œï¼Œä»¥åŠè¿™æ ·çš„è®¾è®¡å¸¦æ¥çš„åˆçº¦æƒé™é—®é¢˜ä¸å®‰å…¨é£é™©ã€‚

æˆ‘è®¤ä¸ºï¼Œå°†ç§é’¥æ”¾åœ¨ç¯å¢ƒå˜é‡ä¸­ä¸æ˜¯ä¸€ä¸ªå¥½åŠæ³•ï¼Œæˆ‘ä»¬æ— æ³•æ§åˆ¶ç¬¬ä¸‰æ–¹æ¨¡å—æ˜¯å¦ä¼šå°†ç¯å¢ƒå˜é‡ä¸­çš„å†…å®¹è®¡å…¥æ—¥å¿—æˆ–è€…è¿œç¨‹ç»Ÿè®¡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸“ä¸šçš„ç§é’¥ç®¡ç†æœåŠ¡æ¥ç®¡ç†ï¼Œä¾‹å¦‚ä½¿ç”¨Â [Google Secret Manager](https://cloud.google.com/secret-manager)Â æˆ–è€…Â [AWS Secrets Manager](https://aws.amazon.com/cn/secrets-manager/)Â æ¥è¿›è¡Œç®¡ç†ï¼Œè€Œå‰è€…å¯ä»¥ä¸ Firebase å¾ˆå¥½åœ°è¿›è¡Œæ•´åˆã€‚

[Secret Manager Â |Â  Google Cloud](https://cloud.google.com/secret-manager)

é€šè¿‡ Provider å’Œ Signer ä¸ Relay Network è¿›è¡Œé€šä¿¡åªéœ€è¦ä¼ é€’é’±åŒ…ç§é’¥ç»™å¯¹åº”çš„Â `Provider/Signer`Â å®ä¾‹å³å¯å®Œæˆæ“ä½œï¼Œä¸æœ¬åœ°è¿›è¡Œå•å…ƒæµ‹è¯•çš„æœºå™¨äººé’±åŒ…ä¸€æ ·ï¼Œå®ƒä¸ä¼šæœ‰é¢å¤–çš„ç¡®è®¤è¿‡ç¨‹ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç¡®è®¤é’±åŒ…ä¸­æœ‰è¶³å¤Ÿçš„ ETH æˆ–å…¶ä»– Gas token ä½™é¢ï¼Œå¦åˆ™è¯¥äº¤æ˜“ä¼šå¤±è´¥ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬çš„æœåŠ¡ç«¯æ¥å£ä¸­æœ‰å¯¹åº”çš„åˆçº¦å†™æ“ä½œï¼Œæˆ‘ä»¬ä¸ä¼šç­‰å¾…äº¤æ˜“å®Œæˆå†è¿”å›æ•°æ®ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›å¯¹åº”çš„Â `tx.hash`Â æ–¹ä¾¿å‰ç«¯ç•Œé¢å¤„ç†åç»­é€»è¾‘ã€‚

### 6.4 å®ç”¨çš„ SDK

ä¸€äº› SDK å’Œå¯¹åº”æœåŠ¡å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿åœ°åœ¨æœåŠ¡ç«¯ä¸åˆçº¦è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚Â [ThirdWeb](https://thirdweb.com/)ï¼š

[Web3 SDKs for developers â¸± No-code for NFT artists | thirdweb](https://thirdweb.com/)

Thirdweb æä¾›äº†ä¸€ä¸ª SaaS åˆçº¦å¼€å‘å¹³å°ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒçš„å‰ç«¯ App å‘å¸ƒé¢„è®¾åŠŸèƒ½çš„åˆçº¦ï¼Œä¾‹å¦‚ NFT Drop æˆ–è€… NFT äº¤æ˜“å¹³å°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæä¾›çš„ç¬¬ä¸‰æ–¹ access key ä¸å·²å‘å¸ƒçš„åˆçº¦è¿›è¡Œé€šä¿¡ï¼ˆè€Œæ— éœ€ä¾èµ–åˆçº¦çš„ ABIï¼‰ï¼š

```
import { ThirdwebSDK } from "@thirdweb-dev/sdk";

// The RPC url determines which blockchain you want to connect to
const rpcUrl = "https://polygon-rpc.com/";
// instantiate the SDK as read only on a given blockchain
const sdk = new ThirdwebSDK(rpcUrl);

// access your deployed contracts
const nftDrop = sdk.getNFTDrop("0x...");
const marketplace = sdk.getMarketplace("0x...");

// Read from your contracts
const claimedNFTs = await nftDrop.getAllClaimed();
const listings = await marketplace.getActiveListings();
```

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒçš„Â [JavaScript SDK](https://github.com/thirdweb-dev/typescript-sdk)ï¼ˆTypescriptï¼‰

[thirdweb-dev/typescript-sdk: Best in class web3 SDK for Browser, Node and Mobile apps (github.com)](https://github.com/thirdweb-dev/typescript-sdk)

## 7. åˆçº¦éƒ¨ç½²æ–¹æ¡ˆ L1s & L2

åœ¨ DApp å¼€å‘ä¸­ï¼Œä¸ä¼ ç»Ÿäº§å“æœ€å¤§çš„ä¸åŒç‚¹ä¹‹ä¸€æ˜¯æˆ‘ä»¬éœ€è¦å†³å®šå°†äº§å“æ ¸å¿ƒé€»è¾‘çš„æ™ºèƒ½åˆçº¦å‘å¸ƒåˆ°é‚£ä¸ªç½‘ç»œï¼ˆæˆ–è€…å“ªäº›ç½‘ç»œï¼‰è¿™æ„å‘³ç€ï¼ŒDApp éœ€è¦æœ‰ã€Œè·¨å¹³å°è·¨ç½‘ç»œã€çš„æ”¯æŒèƒ½åŠ›ã€‚

å¯¹äºä¼ ç»Ÿäº’è”ç½‘å¼€å‘äººå‘˜æ¥è¯´ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“ç†è§£ã€Œè·¨å¹³å°ã€ï¼Œå®ƒæ˜¯æŒ‡æˆ‘ä»¬éœ€è¦ä¸º App ç•Œé¢æä¾› PC Web/Mobile Webï¼ŒiOS/Android App çš„å„ç§ç‰ˆæœ¬ã€‚ã€Œè·¨ç½‘ç»œã€åœ¨ DApp çš„å¼€å‘ä¸­æŒ‡çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦è®© DApp å‰ç«¯/å®¢æˆ·ç«¯æ”¯æŒå¤šä¸ªåŒºå—é“¾ç½‘ç»œã€‚åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å†³å®šå“ªäº›åŒºå—é“¾ç½‘ç»œæ˜¯æˆ‘ä»¬é¦–é€‰çš„å‘å¸ƒç¯å¢ƒã€‚

è‡ª 2017 å¹´å‘å±•è‡³ä»Šï¼Œç›®å‰å¸‚åœºä¸­æœ‰å¤§é‡çš„åŒºå—é“¾ç½‘ç»œä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚æŒ‰ç…§å®ƒä»¬çš„å…±è¯†è¯æ˜ç§ç±»ï¼Œå¯ä»¥è¢«åˆ†ä¸º PoS å’Œ PoWï¼›æŒ‰ç…§å®ƒä»¬çš„è§’è‰²å®šä½ï¼Œå¯ä»¥åˆ†ä¸º L1 ä¸ L2ï¼›æŒ‰ç…§å®ƒä»¬å¯¹ EVM å…¼å®¹çš„ç±»å‹ï¼Œå¯ä»¥åˆ†ä¸º EVM å…¼å®¹é“¾å’Œé EVM å…¼å®¹é“¾ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å‘è¡Œåˆ°è¿™äº›æµè¡Œçš„åŒºå—é“¾ç½‘ç»œï¼š

1.  [Ethereum](https://ethereum.org/zh/)Â (ETH) ä¸»ç½‘ï¼šGas è´¹ç”¨æ˜‚è´µï¼Œä½†å…¶ä¸­å‚¨å­˜äº†å¤§é‡èµ„äº§ï¼Œå¦‚æœä½ çš„é¡¹ç›®ä¸ NFT ç›¸å…³ï¼Œè®¸å¤šäººä¼šé€‰æ‹©å‘å¸ƒåˆ°ä¸»ç½‘ã€‚
2.  [Polygon](https://polygon.technology/)Â (Matic)ï¼šç±» ETH çš„ PoS ä¾§é“¾ï¼ŒEVM å…¼å®¹ï¼Œåœ¨è®¸å¤šå›½å®¶éƒ½æœ‰ä¸€å®šçš„ç”¨æˆ·åŸºç¡€ï¼Œæœ‰é™çš„ TPS æ”¯æŒä¸å¯æ¥å—çš„æˆæœ¬ï¼Œå¼€å‘è€…å‹å¥½ã€‚
3.  [BNB Chain](https://www.bnbchain.world/)Â (BNB): å¸å®‰çš„åŒºå—é“¾ç½‘ç»œï¼ŒEVM å…¼å®¹ï¼Œå¼€å‘è€…å‹å¥½ã€‚
4.  [Solana](https://solana.com/zh)Â (SOL): é«˜æ€§èƒ½åŒºå—é“¾ç½‘ç»œï¼Œæ”¯æŒ[å¤šç§ç¼–ç¨‹è¯­è¨€](https://solana.com/zh/news/getting-started-with-solana-development)ç¼–å†™åˆçº¦ï¼ŒEVM å…¼å®¹ï¼ˆä½¿ç”¨Â [Neon](https://neon-labs.org/)ï¼‰
5.  [AVAX C-chain](https://www.avax.network/)Â (AVAX)ï¼šAVAX çš„åº”ç”¨é“¾ï¼ŒEVM å…¼å®¹ï¼Œæä¾›å¿«é€ŸåŒºå—ç¡®è®¤ï¼Œç›¸å½“ç¨‹åº¦çš„ TPSï¼Œå¯ä»¥è‡ªå·±æ­å»º C-chain ä½œä¸ºåº”ç”¨é“¾ sub-chainï¼ˆä¾‹å¦‚Â [DFK Crystalvale](https://defikingdoms.com/crystalvale/)ï¼‰
6.  [Cosmos](https://cosmos.network/)(ATOM): è¿æ¥åº”ç”¨é“¾çš„åŒºå—é“¾ç½‘ç»œï¼Œé EVM å…¼å®¹ï¼ˆEvmos é™¤å¤–ï¼‰æä¾›å¿«é€Ÿçš„ IBC è·¨é“¾æ¡¥æ”¯æŒï¼Œå¯ä»¥è‡ªå®šä¹‰åº”ç”¨é“¾çš„ Gas tokenï¼Œé€‚åˆ GameFi ä¸éœ€è¦å®šåˆ¶ TPS çš„å¤§å‹åº”ç”¨ã€‚
7.  [Near](https://near.org/zh/)Â (NEAR)ï¼šæä¾›å®Œå–„çš„å¼€å‘è€…å¥—ä»¶å’Œç½‘é¡µé’±åŒ…ä¸€æ•´å¥—æ–¹æ¡ˆï¼Œå› æ­¤ç”¨æˆ·å…¥é—¨éš¾åº¦æœ€ä½ï¼Œé EVM å…¼å®¹ï¼ˆä½¿ç”¨ Rust ç¼–å†™åˆçº¦ï¼‰ã€‚
8.  [StarkNet](https://starkware.co/starknet/)Â (ETH Layer2): ä½¿ç”¨Â [zkRollup](https://www.zkrollups.xyz/)Â æŠ€æœ¯æ”¯æŒçš„ L2 ç½‘ç»œï¼Œé EVM å…¼å®¹ï¼Œç”± Starkware æä¾›æŠ€æœ¯æ”¯æŒï¼ˆå®ƒåŒæ—¶æ”¯æŒäº†Â [IMX](https://www.immutable.com/)Â ä¸è¡ç”Ÿå“ DEXÂ [DyDx](https://dydx.exchange/)ï¼‰æ”¯æŒä¸ L1 çš„åˆçº¦è¿›è¡Œé€šä¿¡ï¼Œæ”¯æŒä½¿ç”¨Â [warp](https://github.com/NethermindEth/warp)Â å·¥å…·å°† Sol ä»£ç è½¬æ¢ä¸º Cario è¯­è¨€çš„åˆçº¦ä»£ç ã€‚
9.  [zkSync2.0](https://zksync.io/)Â (ETH Layer2): ä½¿ç”¨Â [zkRollup](https://www.zkrollups.xyz/)Â æŠ€æœ¯æ”¯æŒçš„ L2 ç½‘ç»œï¼ŒåŒæ—¶æ”¯æŒäº† DEXÂ [ZigZag](https://info.zigzag.exchange/)ã€‚æ”¯æŒä¸ L1 çš„åˆçº¦è¿›è¡Œé€šä¿¡ã€‚
10.  [scroll](https://scroll.io/)Â (ETH Layer2): ä½¿ç”¨Â [zkRollup](https://www.zkrollups.xyz/)(zkEVM)æŠ€æœ¯æ”¯æŒçš„ L2 ç½‘ç»œã€‚
11.  [xDai](https://www.xdaichain.com/)(Gnosis Chain): å®ƒæ”¯æŒäº†è‘—åçš„åˆ°åœºè¯æ˜åˆçº¦Â [POAP](https://poap.xyz/)ã€‚
12.  [Harmony](https://www.harmony.one/)(ONE)ï¼šé«˜æ€§èƒ½åŒºå—é“¾ï¼Œå®ƒæ”¯æŒäº†Â [DFK](https://defikingdoms.com/)Â çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚
13.  [Dfinity](https://dfinity.org/)Â (ICP)ï¼š ä¸€ä¸ªå®Œæ•´çš„ DApp ç”Ÿæ€ç³»ç»Ÿã€‚

æˆ‘ä»¬å¯ä»¥é€‰æ‹©å‘å¸ƒåˆ°æŸä¸ªåŒºå—é“¾ç½‘ç»œï¼Œæˆ–è€…å‘å¸ƒåˆ°æ‰€æœ‰æ”¯æŒ EVM å…¼å®¹çš„ç½‘ç»œä¸­ã€‚ä¸è¿‡ï¼Œä¸åŒçš„åŒºå—é“¾ç½‘ç»œä¸­çš„åˆçº¦æ— æ³•ç›´æ¥é€šä¿¡ï¼Œèµ„äº§ä¹Ÿæ— æ³•éšæ„äº’æ¢ï¼ˆå¯ä»¥é‡‡ç”¨è·¨é“¾æ¡¥åˆçº¦è¿›è¡Œé”å®šå’Œé‡æ–°é“¸é€ ï¼‰ç›®å‰ï¼Œå¤§éƒ¨åˆ† DApp åªä¼šé€‰æ‹©æŸä¸€ä¸ªåŒºå—é“¾ç½‘ç»œè¿›è¡Œå‘å¸ƒã€‚

å¦‚æœä½ çš„é¡¹ç›®æ¶‰åŠåˆ° NFTï¼Œæˆ‘ä¼šæ¨èå‘å¸ƒåˆ° ETH ä¸»ç½‘æˆ–å‚¨å­˜äº†ç›¸å½“æ•°é‡èµ„äº§çš„ç½‘ç»œï¼Œå¦‚æœä½ çš„é¡¹ç›®æ¶‰åŠ GameFiï¼Œå¯ä»¥è€ƒè™‘ TPS é«˜çš„åŒºå—é“¾ç½‘ç»œã€‚å¦‚æœä½ è€ƒè™‘ TPS åˆåŒæ—¶æ³¨é‡èµ„äº§å®‰å…¨ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Layer2 ç½‘ç»œã€‚

æˆ‘ä»¬æ­£å¤„äºä¸€ä¸ªåŒºå—é“¾ç½‘ç»œçš„æˆ˜å›½æ—¶ä»£ï¼Œå› æ­¤ï¼Œé€‰æ‹©éƒ¨ç½²çš„ç½‘ç»œä¸å­˜åœ¨ç»å¯¹çš„æœ€ä½³å®è·µï¼Œå¯ä»¥å‚è€ƒä¸ªäººçš„éœ€æ±‚è¿›è¡Œé€‰æ‹©ã€‚

## 8. å»ä¸­å¿ƒåŒ–å‚¨å­˜æ–¹æ¡ˆ

åœ¨ DApp å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†èµ„äº§çš„å…ƒæ•°æ®ã€DApp UI ç•Œé¢ç­‰å‚¨å­˜åœ¨å»ä¸­å¿ƒåŒ–å‚¨å­˜ç½‘ç»œå½“ä¸­ï¼Œä»¥é˜²æ­¢å•ç‚¹æ•…éšœå¯¼è‡´çš„èµ„äº§æŸå¤±å’Œä¸å¯ç”¨ã€‚

ç®€å•æ¥è¯´ï¼Œèµ„äº§çš„å…ƒæ•°æ®é€šå¸¸æŒ‡çš„æ˜¯ NFT ä¸­åˆçº¦å‚¨å­˜çš„Â `tokenURI()`Â è¿”å›çš„å†…å®¹ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€ä¸ª JSON ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå°†è¿™äº›å­—ç¬¦ä¸²å‚¨å­˜åœ¨åˆçº¦å½“ä¸­éœ€è¦è€—è´¹ç›¸å½“å¤§çš„æˆæœ¬ï¼Œå› æ­¤ï¼Œæœ€ä½³å®è·µæ˜¯å°†ä»–ä»¬éƒ¨ç½²åˆ°å»ä¸­å¿ƒåŒ–å‚¨å­˜ç½‘ç»œä¸­ï¼Œå†ä¿å­˜å‚¨å­˜å¯¹è±¡çš„ç´¢å¼• IDï¼ˆä¾‹å¦‚Â [IPFS CID](https://docs.ipfs.io/concepts/content-addressing/)ï¼‰

æµè¡Œçš„å»ä¸­å¿ƒåŒ–å‚¨å­˜æ–¹æ¡ˆæœ‰ï¼š

1.  [IPFS](https://ipfs.io/)ï¼šæœ€æ—©å’Œæœ€æµè¡Œçš„å»ä¸­å¿ƒåŒ–å‚¨å­˜ç½‘ç»œã€‚
2.  [Filecoin](https://filecoin.io/zh-cn/)ï¼šä»¥ IPFS ä¸ºåŸºç¡€çš„å‚¨å­˜ç½‘ç»œã€‚
3.  [Arweave](https://www.arweave.org/)(AR)ï¼šå»ä¸­å¿ƒåŒ–çš„æ°¸å­˜ç½‘ç»œï¼Œä¸€æ¬¡å†™å…¥ä»˜è´¹ï¼Œè¯»æ•°æ®å…è´¹ã€‚ä½ æ­£åœ¨é˜…è¯»çš„è¿™ç¯‡æ–‡ç« å³ç”± Mirror ä»£ä¸ºä¿å­˜åœ¨ AR ä¸Šã€‚

ç”±äº IPFS ç­‰æ–¹æ¡ˆéœ€è¦å¤šä¸ªèŠ‚ç‚¹ä¿æŒï¼ˆPinï¼‰å‚¨å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œå› æ­¤ï¼Œä¸Šè¿°æœåŠ¡éƒ½æœ‰é’ˆå¯¹å¼€å‘è€…çš„é«˜çº§åŒ…è£…å‚¨å­˜æœåŠ¡ï¼ˆç±»ä¼¼ AWS S3ï¼‰æˆ‘å‘å¤§å®¶æ¨èï¼š

1.  [Web3.storage](https://web3.storage/)Â åŸºäº Filecoin çš„å…è´¹å‚¨å­˜æœåŠ¡ã€‚
2.  [NFT.storage](https://nft.storage/)Â Web3.storage æä¾›çš„ NFT å…ƒæ•°æ®é’ˆå¯¹æ€§å‚¨å­˜æœåŠ¡ï¼Œæä¾›ç½‘é¡µç•Œé¢ä¸Šä¼ ä¸ SDKã€‚
3.  [Filebase](https://filebase.com/)Â æ•´åˆäº†å¤šä¸ªå»ä¸­å¿ƒåŒ–å‚¨å­˜ç½‘ç»œçš„æœåŠ¡ï¼Œæ¥å£ç±»ä¼¼ AWS S3ï¼Œæä¾›ä¸°å¯Œçš„ SDK ä¸ APIï¼Œæ”¯æŒä¿¡ç”¨å¡ä»˜è´¹ã€‚
4.  [Bundlr](https://docs.bundlr.network/)Â åŸºäº Arweave æ„å»ºçš„æ°¸ä¹…å‚¨å­˜æœåŠ¡ï¼Œæ”¯æŒç”¨å¤šé“¾ token ç»“ç®—ã€‚

å¦‚æœä½ è€ƒè™‘ä¸º NFT å…ƒæ•°æ®å¯»æ‰¾å»ä¸­å¿ƒåŒ–å‚¨å­˜æ–¹æ¡ˆï¼Œéœ€è¦[ç¡®ä¿](https://docs.opensea.io/docs/metadata-standards)Â OpenSea æ”¯æŒå®ƒä»¬ï¼Œå¦åˆ™ä½ çš„ NFT ä¸åˆçº¦å°†æ— æ³•æ­£å¸¸åœ¨ OpenSea é¡µé¢ä¸­æ˜¾ç¤ºã€‚OpenSea ç›®å‰æ”¯æŒ IPFS ä¸ Arweave çš„å‚¨å­˜åè®®ã€‚

å¦å¤–ï¼Œå¦‚æœä½ åœ¨ç¼–å†™åˆçº¦æ—¶é¢„å…ˆç¡¬ç¼–ç å†™å…¥ NFT å’Œå…¶ä»–å…ƒæ•°æ®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ IPFS CARï¼ˆContent-Addressed Archiveï¼‰ æ¥é¢„å…ˆè®¡ç®—ä»–ä»¬çš„ CID hashï¼Œè¿™æœ‰åŠ©äºä¿å­˜ä¸€äº› OpenSea è¦æ±‚çš„éæ ‡å‡†æ•°æ®ï¼Œä¾‹å¦‚ NFT åˆçº¦æè¿°å’Œ Banner èƒŒæ™¯å›¾åœ°å€ã€‚

[IPFS Content Addressed Archiver](https://car.ipfs.io/)

## 9. é™„å½•

æœ¬æ–‡ä¸­æåˆ°çš„æ‰€æœ‰é¡¹ç›®å‡åˆ—åœ¨æˆ‘çš„ GitHub Star æ¸…å•ä¸­ï¼Œå¯ä»¥åœ¨è¿™é‡Œç»Ÿä¸€æŸ¥é˜…ï¼š

[guo-yu's list / DApp Best Practice Stack (github.com)](https://github.com/stars/guo-yu/lists/dapp-best-practice-stack)

æ­¤å¤–ï¼Œé™„å½•ä¸­åˆ—å‡ºäº†è®¸å¤šæˆ‘è®¤ä¸ºæœ‰åŠ©äºå¸®æˆ‘ä»¬ç†è§£ DApp ä¸æ™ºèƒ½åˆçº¦å¼€å‘çš„æŒ‡å—ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚é˜…è¿™äº›æŒ‡å—ï¼ˆè¿™ä¸ªåˆ—è¡¨ä¹Ÿä¼šä¸å®šæ—¶æ›´æ–°ï¼‰ï¼š

1.  [åˆçº¦å®‰å…¨é£é™©æŒ‡å— Ethereum Smart Contract Security Best Practices](https://consensys.github.io/smart-contract-best-practices/)
2.  [åˆçº¦ Gas ä¼˜åŒ–æŒ‡å— Awesome Solidity Gas-Optimization](https://github.com/iskdrews/awesome-solidity-gas-optimization)
3.  [brownie](https://github.com/eth-brownie/brownie)ï¼šä¸€ä¸ª Python è¯­è¨€çš„åˆçº¦å·¥ä½œæµå·¥å…·ã€‚
4.  [ethers-rs](https://github.com/gakonst/ethers-rs)ï¼šä¸€ä¸ª Rust çš„é’±åŒ…å®ç°ã€‚
5.  [juice-interface](https://github.com/jbx-protocol/juice-interface)ï¼šè‘—åä¼—ç­¹ç½‘ç«™ juicebox çš„å‰ç«¯ç•Œé¢ã€‚
6.  [starknet.js](https://github.com/0xs34n/starknet.js): StarkNet çš„ JS SDKã€‚
7.  [DFK/contracts](https://github.com/DefiKingdoms/contracts): è‘—å DeFi æ¸¸æˆ DFK çš„æ™ºèƒ½åˆçº¦ã€‚
8.  [thirdweb-dev/contracts](https://github.com/thirdweb-dev/contracts): ThirdWeb å¼€æºçš„åˆçº¦ä»£ç ã€‚
9.  [OpenZeppelin/nile](https://github.com/OpenZeppelin/nile): OZ ä¸º StartNet Cairo è¯­è¨€ç¼–å†™çš„å·¥ä½œæµå·¥å…·ã€‚
10.  [Argent X](https://github.com/argentlabs/argent-x)ï¼šStarkNet çš„å¼€æºé’±åŒ…ã€‚