
如何在公共网络上分享私人信息？我们如何创建数学上安全的秘密？实际上什么是加密密钥？

私人通信的公共指南。

![[Pasted image 20221023150522.png]]

比方说，你需要在一个公共通道上交流敏感数据。如果你知道其他人可以读取你的数据，你可能决定对其进行加密。

编码是将原始数据转变为不可破译（但可逆转）的形式的过程。

编码只有在一个条件下才有用：如果（只有）目标收件人能够解码信息，将其转化为原始形式。

如果我们能做到这一点，我们就可以安全地分享敏感数据，甚至向全世界广播。

为了做到这一点，我们使用了一个加密算法。加密算法接收一个信息和一个加密密钥。

如果信息没有被加密，该算法将对其进行编码。

如果信息是加密的，该算法将对其进行解码。

我们将只是把加密算法视为理所当然；你可以把它当作一个黑盒子。我们对加密密钥感兴趣。

更具体地说，我们感兴趣的是了解如何创建一个密钥。

由于加密算法的性质，任何拥有加密密钥的人都能够解读信息。

如果你没有一个私人渠道来创建/商定密钥，如何在公开场合进行？

你如何在公开场合建立一个共享秘密？


我们的答案来自40多年前的惠特菲尔德-迪菲和马丁-赫尔曼。Diffie-Hellman密钥交换。

这个方案是第一个创建共享秘密的方法，它不需要加密密钥的实际交换（通过纸张、磁盘等）。

在我们开始之前，我们需要介绍一些基本的数学知识（别担心，这并不坏）。

当你除以两个整数时，有时结果不是一个整数（例如有一个提醒）。模算术是数学的一个分支，主要是针对余数的。

[What is modular arithmetic? (article) | Khan Academy](https://www.khanacademy.org/computing/computer-science/cryptography/modarithmetic/a/what-is-modular-arithmetic)


模运算（写成 "mod"）是求余数的运算。

10 / 3 = 3，余数为1 = 10 mod 3 = 1
14 / 6 = 2，余数为2 = 14 mod 6 = 2
3 / 10 = 0，余数为3 = 3 mod 10 = 3

想象一下，一个时钟是模12。

好了，就这样吧! 你需要的所有数学知识。

这是不是太多？不用担心! Diffie-Hellman有一个经典的比喻，非常有帮助：混合颜料。在这个比喻中，目标是创造一种只有参与者知道的秘密颜色。

Diffie-Hellman始于两方（中本聪、维塔利克）、一个公共数据通道和两个公开的数字：g和n（黄色）。

g和n要么是事先商定的，使用一些行业标准，要么是在过程开始前公开商定的。

![[Pasted image 20221023151103.png]]

 双方都有一个秘密号码（Satoshi - a，红色）（Vitalik - b，蓝色）。这些数字是其所有者发送的每条信息的钥匙；其隐私是最重要的。

为了开始这个过程，双方都导入公开的数据（g和n-黄），并应用他们的秘密数字。

下面的公式有点吓人；让我把它分解一下。

我们所做的是将g乘以自身a/b倍，然后应用mod n。

![[Pasted image 20221023151203.png]]

Here is a concrete example:

![[Pasted image 20221023151220.png]]


接下来，双方将通过公共信道发送这个新值。

在这一点上，两个值都是公开的，但是没有观察者可以恢复原始数据。关键的部分是modulo函数。


![[Pasted image 20221023151252.png]]

让我们把时钟想成一个有模12的系统。

仅仅因为你知道我们从4（g）开始，在6（g^a mod n）结束，并没有给你足够的信息来知道我们持续了多长时间：2小时？14小时？26小时？

g^a mod n也是同样的问题!

事实证明，除了开始猜测之外，并没有一个很好的方法来做到这一点。我们的例子使用的是很小的数字，但实际上这些数值会有几百位之多。

猜测不仅是困难的，而且几乎是不可能的（尽管这一点正在变得不那么真实）。

一旦双方都有了这个中间值，他们就可以重复他们用来制造这个中间值的过程：将新值a/b乘以，除以n时取余数。

这里就是神奇的地方。现在你们都有了相同的数字；一个别人不知道的数字。

Here is a concrete example:

![[Pasted image 20221023151414.png]]

因此，在你完成Diffie-Hellman密钥交换过程后，双方都有一个共享秘密。他们都可以确信，他们（而且只有他们）将是唯一能够读取使用该值作为加密密钥的信息的人。

一个公开的秘密!