## 密码存储在DB中的设计

![[Pasted image 20220711095009.png]]

将密码存储在纯文本中并不是一个好主意，因为任何有内部权限的人都可以看到它们。 直接存储密码哈希值是不够的，因为它会被预先计算的攻击所修剪，如彩虹表。为了缓解这种情况，我们在密码中加入盐。  
  
𝐖𝐡𝐚𝐭 𝐢𝐬𝐬𝐚𝐥𝐭? 根据OWASP指南，"盐是一个独特的、随机生成的字符串，作为Hash过程的一部分被添加到每个密码中"。  
  
𝐇𝐨𝐰 𝐭𝐨 𝐬𝐭𝐨𝐫𝐞 𝐚 𝐩𝐚𝐬𝐬𝐰𝐨𝐫𝐝 𝐚𝐧𝐝 𝐬𝐚𝐥𝐭?  
- 盐并不意味着是秘密的，它可以以纯文本形式存储在数据库中。它用于确保Hash结果对每个密码都是唯一的。  
- 密码可以用以下格式存储在数据库中。𝘩𝘢𝘴𝘩( 𝘱𝘢𝘴𝘴𝘸𝘰𝘳𝘥 + 𝘴𝘢𝘭𝘵) 。  
  
𝐇𝐨𝐰𝐭𝐨 𝐯𝐚𝐥𝐢𝐝𝐚𝐭𝐞 𝐚 𝐩𝐚𝐬𝐬𝐰𝐨𝐫𝐝? 要验证一个密码，可以经过以下过程。  
- 客户端输入密码。  
- 系统从数据库中获取相应的盐。  
- 系统将盐附加到密码上，并对其进行hash。我们把hash的值称为H1。  
- 系统比较H1和H2，其中H2是存储在数据库中的hash值。如果它们相同，密码就是有效的。  
  
