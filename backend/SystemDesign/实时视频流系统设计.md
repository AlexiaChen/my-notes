#### 实时视频流系统的架构

1. 视频直播如何在YouTube、TikTok直播或Twitch上运行？这种技术被称为直播。直播与普通流媒体不同，直播因为视频内容是通过互联网实时发送的，通常只有几秒钟的延迟。

![[Pasted image 20220812112757.png]]

2. 下图解释了幕后发生的事情，使之成为可能。  
  
- 第1步：原始视频数据由麦克风和摄像头捕获。该数据被发送到服务器端。  
- 第2步：视频数据被压缩和编码。例如，压缩算法将背景和其他视频元素分开。压缩后，视频被编码为标准，如H.264。这一步之后，视频数据的大小就会小很多。  
- 第3步：编码后的数据被分成更小的片段，通常是几秒钟的长度，因此下载或流媒体所需的时间要少得多。  
- 第4步：分割后的数据被发送到流媒体服务器。流媒体服务器需要支持不同的设备和网络条件。这被称为 "自适应比特率流"。这意味着我们需要在步骤2和3中产生不同比特率的多个文件。  
- 第5步：直播数据被推送到由CDN（内容交付网络）支持的边缘服务器。数百万观众可以从附近的边缘服务器观看视频。CDN大大降低了数据传输的延迟。  
- 第6步：观众的设备对视频数据进行解码和解压，在视频播放器中播放视频。  
- 步骤7和8：如果视频需要存储重播，编码后的数据将被发送到存储服务器，观众可以在以后向其请求重播。  
  
3. 现场直播的常见协议包括。
- RTMP（实时信息传输协议）。这最初是由Macromedia开发的，用于在Flash播放器和服务器之间传输数据。现在它被用于在互联网上传输视频数据。

4. 请注意，像Skype这样的视频会议应用程序使用RTC协议以获得低延迟。
- HLS（HTTP实时流媒体）。它需要H.264或H.265编码。苹果设备只接受HLS格式 
- DASH（HTTP动态自适应流媒体）。DASH不支持苹果设备

5. HLS和DASH都支持自适应比特率流。