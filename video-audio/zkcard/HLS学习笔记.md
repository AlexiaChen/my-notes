
### 简介

Http Live Streaming(HLS)是一个基于HTTP的 自适应比特率的流媒体通信协议，由苹果公司开发，并在2009年发布。对该协议的广泛支持有很多，包括媒体播放器、网络浏览器、移动设备和 流媒体服务器。

HLS类似于MPEG-DASH，它的工作方式是将整个数据流分解成一连串基于HTTP的小文件下载，每个文件下载一个可能无限制的整体传输流的短块。使用扩展的M3U播放列表，将以不同的比特率编码的可用流列表发送给客户端。

基于标准的HTTP传输，HTTP实时流媒体可以穿越任何允许通过标准HTTP流量的防火墙或代理服务器，与基于UDP的协议（如RTP）不同。这也允许从传统的HTTP服务器提供内容，并通过广泛使用的基于HTTP的内容传输网络进行传输。

详情标准参考RFC8216。

## HLS实现架构

一般是基于传统的web server上实现HLS，就可以分发流媒体内容了。

主要由以下三部分组成：

###### Server

对输入的视频流进行编码和封装，以适当的格式进行传输。然后，通过将其分割成不同的文件，为分发做准备。在接收过程中，对视频进行编码和分割，生成视频片段和索引文件。

- 编码器。将视频文件编码为H.264格式，将音频编码为AAC、MP3、AC-3或EC-3。
- 分割器。将数据流分割成等长的片段。它还创建了一个索引文件，包含对片段文件的引用，保存为.m3u8。相当于m3u8就是索引文件。m3u8是m3u文件的Unicode版本。详情参考 [M3U - Wikipedia](https://en.wikipedia.org/wiki/M3U)

###### 分发器

由一个标准的web server形成，接受client的请求，并提供流媒体所需的所有资源（.m3u8播放列表文件和.ts片段文件）。


###### 客户端

请求并下载所有的文件和资源，将它们组装起来，以便能以连续的流动视频的形式呈现给用户。客户端软件首先通过一个URL下载索引文件，然后下载几个可用的媒体文件。播放软件将这一序列组装起来，以便能够继续显示给用户。

## HLS的功能特性

HTTP实时流媒体为播放器提供了适应不可靠的网络条件的机制，而不会造成用户可见的播放停顿。例如，在一个不可靠的无线网络上，HLS允许播放器使用较低质量的视频，从而减少带宽的使用。HLS视频可以通过为同一视频提供多个服务器来实现高可用性，允许播放器在其中一个服务器出现故障时进行无缝切换。


## 支持HLS的播放器

- 最新的微软Edge浏览器已经不支持
- windows 11 media player
- macOS 10.6+ （safari和QuickTime）
- iOS 3.0+ (Safari)
- Android 4.1+ (Google Chrome)

## 参考

- [HTTP Live Streaming - Wikipedia](https://en.wikipedia.org/wiki/HTTP_Live_Streaming)
- [(4条消息) Web 前端如何播放 HLS(.m3u8) 视频_燕山八音的博客-CSDN博客_hls web](https://blog.csdn.net/u014717572/article/details/94736770)


