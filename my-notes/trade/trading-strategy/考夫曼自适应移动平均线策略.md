
[Trading Strategies & Indicators Built by TradingView Community](https://www.tradingview.com/script/rm6K3yV6-Kaufman-Adaptive-Moving-Average-KAMA-Strategy-TradeDots/)

![[Pasted image 20240621173639.png]]

â€œè€ƒå¤«æ›¼è‡ªé€‚åº”ç§»åŠ¨å¹³å‡çº¿ ï¼ˆKAMAï¼‰ ç­–ç•¥â€æ˜¯ä¸€ä¸ªè¶‹åŠ¿è·Ÿè¸ªç³»ç»Ÿï¼Œå®ƒåˆ©ç”¨äº†è€ƒå¤«æ›¼è‡ªé€‚åº”ç§»åŠ¨å¹³å‡çº¿ ï¼ˆKAMAï¼‰ çš„è‡ªé€‚åº”ç‰¹æ€§ã€‚è¯¥ç­–ç•¥çš„ç‰¹ç‚¹æ˜¯èƒ½å¤Ÿæ ¹æ®å¸‚åœºæ³¢åŠ¨åŠ¨æ€è°ƒæ•´ï¼Œé€šè¿‡æœ€å¤§é™åº¦åœ°å‡å°‘é€šå¸¸ä¸Žç®€å•ç§»åŠ¨å¹³å‡çº¿ ï¼ˆSMAï¼‰ ç›¸å…³çš„è™šå‡å’Œå»¶è¿Ÿä¿¡å·çš„å½±å“æ¥æé«˜äº¤æ˜“å‡†ç¡®æ€§ã€‚

## How it works

è¯¥ç­–ç•¥ä»¥ä½¿ç”¨ Kaufman è‡ªé€‚åº”ç§»åŠ¨å¹³å‡çº¿ ï¼ˆKAMAï¼‰ æŒ‡æ ‡ä¸ºä¸­å¿ƒï¼Œè¯¥æŒ‡æ ‡ä»¥å“è¶Šçš„å¹³æ»‘æŠ€æœ¯å®Œå–„äº†æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿ ï¼ˆEMAï¼‰ çš„åŽŸç†ã€‚  
  
KAMAé€šè¿‡â€œæ•ˆçŽ‡æ¯”ï¼ˆERï¼‰â€å¯¹å¸‚åœºä»·æ ¼å˜åŒ–çš„å“åº”èƒ½åŠ›è€Œä¸Žä¼—ä¸åŒã€‚è¯¥æ¯”çŽ‡çš„è®¡ç®—æ–¹æ³•æ˜¯å°†æœ€è¿‘çš„ç»å¯¹å‡€ä»·æ ¼å˜åŒ–é™¤ä»¥æŒ‡å®šæ—¶æœŸå†…ç»å¯¹ä»·æ ¼å˜åŒ–çš„ç´¯ç§¯æ€»å’Œã€‚ç”Ÿæˆçš„ ER å€¼ä»‹äºŽ 0 å’Œ 1 ä¹‹é—´ï¼Œå…¶ä¸­ 0 è¡¨ç¤ºå¸‚åœºå™ªéŸ³é«˜ï¼Œ1 è¡¨ç¤ºå¸‚åœºåŠ¨èƒ½æ›´å¼ºã€‚  
  
ä½¿ç”¨ ERï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä½¿ç”¨ä»¥ä¸‹å…¬å¼å¾—å‡ºçš„ç§»åŠ¨å¹³å‡çº¿çš„å¹³æ»‘å¸¸æ•° ï¼ˆSCï¼‰ï¼š

```pascal
fastestÂ =Â 2/(fastma_lengthÂ +Â 1)  
slowestÂ =Â 2/(slowma_lengthÂ +Â 1)  
SCÂ =Â Â math.pow((ERÂ *Â (fastest-slowest)Â +Â slowest),Â 2)
```

ç„¶åŽï¼Œé€šè¿‡å°† SC åº”ç”¨äºŽå½“å‰ä»·æ ¼ä¸Žä¹‹å‰ KAMA ä¹‹é—´çš„å·®é¢æ¥è®¡ç®— KAMA çº¿ã€‚

## Application

å¯¹äºŽè¿›å…¥å¤šå¤´å¤´å¯¸ï¼Œå½“æœ‰ 10 æ¡è¿žç»­ä¸Šå‡çš„ KAMA çº¿åºåˆ—æ—¶ï¼Œæ­¤ç­–ç•¥å°†åˆå§‹åŒ–ã€‚ç›¸åï¼Œè¿žç»­ 10 æ¡ä¸‹é™çš„ KAMA çº¿ä¼šè§¦å‘å¤šå¤´å¤´å¯¸çš„å–å•ã€‚åŒæ ·çš„é€»è¾‘ä¹Ÿé€‚ç”¨äºŽç©ºå¤´å¤´å¯¸ã€‚


## Default setup

ä½£é‡‘ï¼š0.01%  
åˆå§‹èµ„æœ¬ï¼š$10,000  
æ¯ç¬”äº¤æ˜“å‡€å€¼ï¼š80%  
  
å»ºè®®ç”¨æˆ·è°ƒæ•´å’Œä¸ªæ€§åŒ–æ­¤äº¤æ˜“ç­–ç•¥ï¼Œä»¥æ›´å¥½åœ°åŒ¹é…ä»–ä»¬çš„ä¸ªäººäº¤æ˜“åå¥½å’Œé£Žæ ¼ã€‚


![[Pasted image 20240621174015.png]]


## Script

```pascal
// This Pine Scriptâ„¢ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© tradedots

//@version=5
strategy("Kaufman Adaptive Moving Average (KAMA) Strategy [TradeDots]", overlay = true, max_lines_count = 500, max_boxes_count = 100, initial_capital = 10000, currency = currency.USD, commission_type = strategy.commission.percent, commission_value = 0.01, default_qty_type = strategy.percent_of_equity, default_qty_value = 80)

// KAMA Setup
lookback_period = input.int(10, title="Length", group="KAMA")
ma_source = input(close, "KAMA Soruce", group="KAMA")
fastma_length = input.int(5, "Fast MA Legnth", minval=1,group="KAMA")
slowma_length = input.int(50, "Slow MA Legnth", minval=1,group="KAMA")

// Strategy Setup
input_order_direction = input.string("Long", options = ["Long", "Short", "Long and Short"], title = "Order Direction", group = "Strategy")
kama_rising_perid = input.int(10, title="Rising Period", group="Strategy")
kama_falling_perid = input.int(10, title="Falling Period", group="Strategy")

pine_kama(source) =>
    price_change = math.abs(source - source[lookback_period])
    sum_price_change = math.sum(math.abs(source - source[1]), lookback_period)
    fastest = 2/(fastma_length + 1)
    slowest = 2/(slowma_length + 1)
    ER = price_change / sum_price_change
    SC =  math.pow((ER * (fastest-slowest) + slowest), 2)

    alpha = SC
    sum = 0.0
    sum := na(sum[1]) ? source : sum[1] + SC * (close - nz(sum[1]))

kama = pine_kama(ma_source)

if ta.rising(kama, kama_rising_perid)
    strategy.close("Short")
    if input_order_direction != "Short" and strategy.opentrades == 0
        strategy.entry("Long", strategy.long)
        label.new(bar_index, low, "ðŸŸ¢ Long", color = #9cff87, style = label.style_label_up)

else if ta.falling(kama, kama_falling_perid) 
    strategy.close("Long")
    if input_order_direction != "Long" and strategy.opentrades == 0
        strategy.entry("Short", strategy.short)
        label.new(bar_index, high, "ðŸ”´ Short", color = #f9396a, style = label.style_label_down, textcolor = color.white)

// Check if position is closed (Print label if true)
is_pos_closed = (strategy.position_size[1] != 0 and strategy.position_size == 0)
is_short = strategy.position_size < 0
is_long = strategy.position_size > 0

if is_pos_closed and is_short[1] 
    label.new(bar_index, low, "ðŸŸ¢ Close Short", color = #9cff87, style = label.style_label_up)

else if is_pos_closed and is_long[1]
    label.new(bar_index, high, "ðŸ”´ Close Long", color = #f9396a, style = label.style_label_down, textcolor = color.white)

closelinePlot = plot(close, "", display = display.none)
kamaPlot = plot(kama, title = "KAMA", color = #ffffff)
fill(kamaPlot, closelinePlot, math.max(kama,close), kama,color.new(#9cff87, 75), color.new(#9cff87, 60))
fill(kamaPlot, closelinePlot, kama, math.min(kama,close),color.new(#f9396a, 60), color.new(#f9396a, 75))


```